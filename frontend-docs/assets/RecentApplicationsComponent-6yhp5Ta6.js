import{j as e}from"./jsx-runtime-Ds-gkUgj.js";import{r as n}from"./index-CtvPRVHf.js";/* empty css                           */import{g as j}from"./ApplicationData-ZvYeRaMT.js";import{B as c}from"./Box-CiLytvgs.js";import{C as N}from"./CircularProgress-CxdDrrre.js";import{T as i}from"./Typography-bP-jEqOD.js";import{A as S}from"./Alert-DwyBMc6h.js";import{C as h}from"./Card-BsQn96zs.js";import{C as u}from"./CardContent-BepYH2Pv.js";import{B as f}from"./Button-DiC-o-A5.js";import{a as D}from"./List-DA57XQw0.js";import{L as v}from"./ListItem-CCj6bunS.js";import{G as I}from"./Grid-B96pV0rY.js";import{u as E,a as L}from"./chunk-AYJ5UCUI-CkRdRQ96.js";const w=()=>{const[o,g]=n.useState([]),[A,l]=n.useState(!0),[d,x]=n.useState(null),s=E(),C=L();n.useEffect(()=>{const a=async()=>{try{l(!0);const t=j();g(t)}catch(t){x("Error loading applications: "+t.message)}finally{l(!1)}};a();const r=t=>{t.key==="applications"&&a()};return window.addEventListener("storage",r),()=>{window.removeEventListener("storage",r)}},[C.pathname]);const m=a=>{switch(a){case"Approved":return"green";case"Pending":return"darkorange";case"Declined":return"red";default:return"#184a5b"}},y=(a,r)=>{switch(a){case"Birth Certificate":s("/BirthCertificateDashboard");break;case"Marriage Certificate":s("/MarriageLicenseDashboard");break;case"Marriage License":s("/MarriageLicenseSummary");break;default:s("/")}},p=a=>{if(a.type==="Birth Certificate")try{const r=o.find(t=>t.id===a.id);r&&r.formData?(localStorage.setItem("birthCertificateApplication",JSON.stringify(r.formData)),localStorage.setItem("currentApplicationId",a.id),s("/BirthApplicationSummary")):(console.error("Application data not found for ID:",a.id),alert("Could not load application data. Please try again."))}catch(r){console.error("Error preparing application summary:",r),alert("An error occurred while loading the application summary.")}else if(a.type==="Marriage Certificate")try{const r=o.find(t=>t.id===a.id);r&&r.formData?(localStorage.setItem("marriageFormData",JSON.stringify(r.formData)),localStorage.setItem("currentMarriageApplicationId",a.id),s("/MarriageSummaryForm")):(console.error("Marriage application data not found for ID:",a.id),alert("Could not load marriage application data. Please try again."))}catch(r){console.error("Error preparing marriage application summary:",r),alert("An error occurred while loading the marriage application summary.")}else y(a.type)};return A?e.jsxs(c,{className:"LoadingContainerApplications",children:[e.jsx(N,{}),e.jsx(i,{children:"Loading recent applications..."})]}):d?e.jsx(c,{className:"ErrorContainerApplications",children:e.jsx(S,{severity:"error",children:d})}):o.length===0?e.jsxs("div",{className:"RecentApplicationsDivider",children:[e.jsx(i,{variant:"h5",className:"RecentApplicationsTitle",children:"RECENT APPLICATIONS"}),e.jsx(h,{className:"NoApplicationsCard",children:e.jsxs(u,{children:[e.jsx(i,{children:"You have no recent applications."}),e.jsx(f,{variant:"contained",color:"primary",className:"StartApplicationBtn",onClick:()=>s("/applications"),children:"Start a New Application"})]})})]}):e.jsxs("div",{className:"RecentApplicationsDivider",children:[e.jsx(i,{variant:"h5",className:"RecentApplicationsTitle",children:"RECENT APPLICATIONS"}),e.jsx(D,{children:o.map((a,r)=>e.jsx(v,{children:e.jsx(h,{className:"ApplicationCard",children:e.jsx(u,{children:e.jsxs(I,{container:!0,justifyContent:"space-between",alignItems:"center",children:[e.jsxs("div",{className:"ApplicationDetails",children:[e.jsx(i,{className:"ApplicationCardTitle",onClick:()=>p(a),children:a.type}),e.jsxs(i,{className:"ApplicationId",children:["ID: ",a.id||"N/A"]}),e.jsx(i,{className:"ApplicationDate",children:a.date}),e.jsx(i,{className:"ApplicationStatus",sx:{color:m(a.status)},children:a.status}),e.jsx(i,{className:"ApplicationStatus",sx:{color:m(a.status)},children:a.statusMessage}),e.jsx(i,{className:"ApplicationType",children:a.applicationType}),e.jsx(i,{className:"ApplicationDescription",children:a.message})]}),e.jsx(c,{className:"ApplicationCardActions",children:e.jsx(f,{size:"small",className:"ViewSummaryBtn",onClick:()=>p(a),children:"View Summary"})})]})})})},a.id||r))})]})};w.__docgenInfo={description:"",methods:[],displayName:"RecentApplicationsComponent"};export{w as R};
