import{j as t}from"./jsx-runtime-B78vVl8w.js";import{r as B}from"./iframe-TbmtwHaR.js";import{C as O}from"./ChildIdentifyingForm-ChV6WYE4.js";import{M as R}from"./MotherIdentifyingForm-DEtzU56i.js";import{F as k}from"./FatherIdentifyingForm-BB5vC1hE.js";import{M as P}from"./MarriageIdentifyingForm-CeYze04r.js";import{A as T}from"./BirthBackIdentifyingForm-CM40W49W.js";import{B as M}from"./Box-CsTzEUfI.js";import{T as J}from"./Typography-BsgXHqjp.js";import{P as L}from"./Paper-siCwbD95.js";import{B as a}from"./Button-CqfJ5Kfu.js";import{u as _,a as q}from"./chunk-AYJ5UCUI-Ci6-IpHO.js";import"./FormControl-BhQWCbF8.js";import"./clsx-B-dksMZM.js";import"./utils-DoM3o7-Q.js";import"./useFormControl-UlfWmWWe.js";import"./identifier-CcNMM8xL.js";import"./DefaultPropsProvider-CJWLS2pt.js";import"./isMuiElement-eSICizKb.js";import"./RadioGroup-q5c3HYK5.js";import"./FormControlLabel-ByCBDwAk.js";import"./useSlot-BGJ_XgbO.js";import"./CircularProgress-BICNgqhV.js";import"./createSimplePaletteValueFilter-C5QNR_-2.js";import"./useControlled-Cz8fgdtf.js";import"./createSvgIcon-C62t7wA5.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Grid-ETpaHN02.js";import"./useTheme-Dz-SxAPH.js";import"./useTheme-BsZqcigl.js";import"./TextField-DSv6vg1h.js";import"./OutlinedInput-DrAUErjw.js";import"./isHostComponent-DVu5iVWx.js";import"./Modal-B_iiuiWT.js";import"./utils-CRRhSIYc.js";import"./index-Zf7Q3FYl.js";import"./index-DUco5pM3.js";import"./debounce-Be36O1Ab.js";import"./Menu-BmO9GxbJ.js";import"./useSlotProps-BRUWDHW8.js";import"./Grow-DR233Q3J.js";import"./mergeSlotProps-By6iUkp4.js";import"./List-KyQapubM.js";import"./MenuItem-Btn1PJG6.js";import"./listItemTextClasses-Y8PuN0nc.js";import"./dividerClasses-CcUFb1Uc.js";import"./Alert-DVbnCbB8.js";import"./IconButton-tNDSKNmb.js";const S=()=>{var F;const[s,x]=B.useState(1),[r,g]=B.useState({}),[f,b]=B.useState({}),y=_(),n=((F=q().state)==null?void 0:F.isEditing)||localStorage.getItem("isEditingBirthApplication")==="true";B.useEffect(()=>{if(n)try{console.log("Loading data for editing...");const i=localStorage.getItem("editingApplicationId");console.log("Editing application ID:",i);const o=JSON.parse(localStorage.getItem("applications")||"[]").find(c=>c.id===i);if(o&&o.formData)console.log("Found application to edit:",o),g(o.formData);else{const c=localStorage.getItem("birthCertificateApplication");c?(g(JSON.parse(c)),console.log("Loaded form data from birthCertificateApplication")):console.warn("No application data found for editing")}}catch(i){console.error("Error loading data for editing:",i)}else console.log("Starting with new application - clearing form data"),g({}),localStorage.removeItem("birthCertificateApplication");return()=>{n||localStorage.setItem("birthCertificateApplication",JSON.stringify(r))}},[n]);const m=i=>{const{name:e,value:o,type:c,checked:p}=i.target;g(l=>({...l,[e]:c==="checkbox"?p:o})),Object.keys(r).length>0&&localStorage.setItem("birthCertificateApplication",JSON.stringify({...r,[e]:c==="checkbox"?p:o}))},j={1:["lastName","firstName","birthMonth","birthDay","birthYear","sex","hospital","city","province","barangay","residence","typeOfBirth","birthOrder","birthWeight"],2:["motherLastName","motherFirstName","motherCitizenship","motherReligion","motherTotalChildren","motherLivingChildren","motherDeceasedChildren","motherOccupation","motherAge","motherStreet","motherCity"],3:["fatherLastName","fatherFirstName","fatherCitizenship","fatherReligion","fatherOccupation","fatherAge","fatherStreet","fatherBarangay","fatherCity","fatherProvince","fatherCountry"],4:[],5:[]},w=()=>{var e;const i={};return s===3&&r.notAcknowledgedByFather?!0:((e=j[s])==null||e.forEach(o=>{(!r[o]||r[o].toString().trim()==="")&&(i[o]="This field is required")}),b(i),Object.keys(i).length===0)},u=()=>{w()&&x(i=>i+1)},C=()=>{x(i=>i-1)},D=i=>{i&&i.preventDefault();try{let e;n?(e=localStorage.getItem("editingApplicationId"),console.log("Editing existing application:",e)):(e="BC-"+Date.now().toString().slice(-6),console.log("Creating new application:",e));const o=localStorage.getItem("selectedBirthCertificateOption")||"Regular application",p={id:e,type:"Birth Certificate",applicationType:o,applicationSubtype:(d=>({"Regular application":"Regular Application (0-1 month)","Above 18":"Delayed Registration - Above 18","Below 18":"Delayed Registration - Below 18","Foreign Parent":"Delayed Registration - Foreign Parent","Out of town":"Out of Town Registration","Clerical Error":"Correction - Clerical Errors","Sex DOB":"Correction - Sex/Date of Birth","First Name":"Correction - First Name"})[d]||"Regular Application (0-1 month)")(o),date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric"}),status:n&&localStorage.getItem("currentApplicationStatus")||"Pending",message:`Birth Certificate application for ${r.firstName||""} ${r.lastName||""}`,formData:r,lastUpdated:new Date().toISOString()},l=JSON.parse(localStorage.getItem("applications")||"[]");if(n){const d=l.findIndex(N=>N.id===e);d>=0?(l[d]=p,console.log("Updated existing application at index:",d)):(l.push(p),console.log("Added new application (was editing but not found):",e))}else l.push(p),console.log("Added new application:",e);localStorage.setItem("applications",JSON.stringify(l)),localStorage.setItem("currentApplicationId",e),localStorage.setItem("birthCertificateApplication",JSON.stringify(r)),localStorage.removeItem("isEditingBirthApplication"),localStorage.removeItem("editingApplicationId"),localStorage.removeItem("editingApplication"),window.dispatchEvent(new Event("storage"));const E=new CustomEvent("customStorageUpdate",{detail:{id:e,type:"Birth Certificate",action:n?"updated":"created"}});window.dispatchEvent(E),y(n?"/BirthApplicationSummary":{"Regular application":"/BirthApplicationSummary","Request copy":"/RequestACopyBirthCertificate","Above 18":"/Above18Registration","Below 18":"/Below18Registration","Foreign Parent":"/DelayedOneParentForeignerRegistration","Out of town":"/DelayedOutOfTownRegistration","Clerical Error":"/ClericalErrorApplication","Sex DOB":"/SexDobCorrection","First Name":"/FirstNameCorrection"}[o]||"/BirthApplicationSummary")}catch(e){console.error("Error submitting form:",e),alert("There was a problem submitting your application. Please try again.")}};return t.jsxs(M,{className:"BirthCertificateFormContainer",children:[t.jsx(J,{variant:"h4",className:"BirthCertificateFormTitle",children:"Birth Certificate Application Form"}),t.jsxs(L,{className:"BirthCertificateForm",elevation:3,children:[s===1&&t.jsxs(t.Fragment,{children:[t.jsx(O,{formData:r,handleChange:m,errors:f}),t.jsx(a,{variant:"contained",onClick:u,className:"BirthCertificateFormButton",children:"Next"})]}),s===2&&t.jsxs(t.Fragment,{children:[t.jsx(R,{formData:r,handleChange:m,errors:f}),t.jsx(a,{variant:"contained",onClick:C,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(a,{variant:"contained",onClick:u,className:"BirthCertificateFormButton",children:"Next"})]}),s===3&&t.jsxs(t.Fragment,{children:[t.jsx(k,{formData:r,handleChange:m,errors:f}),t.jsx(a,{variant:"contained",onClick:C,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(a,{variant:"contained",onClick:u,className:"BirthCertificateFormButton",children:"Next"})]}),s===4&&t.jsxs(t.Fragment,{children:[t.jsx(P,{formData:r,handleChange:m,errors:f}),t.jsx(a,{variant:"contained",onClick:C,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(a,{variant:"contained",onClick:u,className:"BirthCertificateFormButton",children:"Next"})]}),s===5&&t.jsxs(t.Fragment,{children:[t.jsx(T,{formData:r,handleChange:m}),t.jsx(a,{variant:"contained",onClick:C,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(a,{variant:"contained",onClick:D,className:"BirthCertificateFormButton",children:"Submit"})]})]})]})};S.__docgenInfo={description:"",methods:[],displayName:"BirthCertificateForm"};const Jt={title:"Components/BirthCertificateForm",component:S},h=()=>t.jsx(S,{});h.__docgenInfo={description:"",methods:[],displayName:"Default"};var v,A,I;h.parameters={...h.parameters,docs:{...(v=h.parameters)==null?void 0:v.docs,source:{originalSource:"() => <BirthCertificateForm />",...(I=(A=h.parameters)==null?void 0:A.docs)==null?void 0:I.source}}};const Lt=["Default"];export{h as Default,Lt as __namedExportsOrder,Jt as default};
