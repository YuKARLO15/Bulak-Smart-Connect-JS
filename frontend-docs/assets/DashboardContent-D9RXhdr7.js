import{j as e}from"./jsx-runtime-ADgNcF8R.js";import{r as o}from"./iframe-DK1y04Ng.js";import{C as b}from"./Calendar-2G3dUN3e.js";import{a as S}from"./announcementService-Bpougkim.js";import{B as u}from"./Box-DDoIQZtm.js";import{T as n}from"./Typography-CYdwMn8V.js";import{c as C}from"./createSvgIcon-BYikzphh.js";import{C as g}from"./Card--UtrwS-m.js";import{C as y}from"./CardContent-DLKbTG4E.js";const N=C(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),A=()=>{const[s,i]=o.useState({show:!1,x:0,y:0}),[c,l]=o.useState([]),[r,d]=o.useState(!0),[m,h]=o.useState(null);o.useEffect(()=>{x()},[]);const x=async()=>{try{d(!0);const t=await S.getRecentAnnouncements(3);l(t),h(null)}catch(t){console.error("Failed to load announcements:",t),h("Failed to load announcements"),l([])}finally{d(!1)}},j=(t,a)=>{const p=a.getDay();(p===0||p===6)&&i({show:!0,x:t.clientX,y:t.clientY})},f=()=>{i({show:!1})},v=t=>{try{return new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}};return e.jsxs(u,{className:"DashboardContainer",children:[e.jsxs("div",{className:"DashboardHeader",children:[e.jsx(n,{variant:"h4",children:"Dashboard"}),e.jsxs("div",{className:"SearchBox",children:[e.jsx(N,{className:"SearchIcon"}),e.jsx("input",{type:"text",placeholder:"Search",className:"SearchInput"})]})]}),e.jsxs("div",{className:"TopSection",children:[e.jsx(g,{className:"DashboardCard",children:e.jsxs(y,{children:[e.jsx(n,{variant:"h6",children:"Appointments"}),e.jsx("div",{style:{position:"relative"},children:e.jsx(b,{className:"Calendar",tileClassName:({date:t})=>t.getDay()===0||t.getDay()===6?"weekend":"",tileContent:({date:t})=>e.jsx("div",{onMouseEnter:a=>j(a,t),onMouseLeave:f,className:"hover-area"})})})]})}),s.show&&e.jsx("div",{className:"tooltip",style:{position:"fixed",top:s.y+10,left:s.x+10},children:"Office is closed"}),e.jsx(g,{className:"DashboardCard",children:e.jsxs(y,{children:[e.jsx(n,{variant:"h6",children:"Announcement"}),e.jsx(u,{className:"AnnouncementBox",children:r?e.jsx("div",{style:{textAlign:"center",padding:"20px"},children:e.jsx(n,{variant:"body2",style:{color:"#666"},children:"Loading announcements..."})}):m?e.jsx("div",{style:{textAlign:"center",padding:"20px"},children:e.jsx(n,{variant:"body2",style:{color:"#d32f2f"},children:m})}):c.length>0?e.jsxs("div",{style:{maxHeight:"300px",overflowY:"auto"},children:[c.map(t=>e.jsxs("div",{style:{marginBottom:"15px",padding:"15px",border:"1px solid #e0e0e0",borderRadius:"8px",backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[e.jsx(n,{variant:"subtitle2",style:{fontWeight:"bold",color:"#184a5b",marginBottom:"8px"},children:t.title}),e.jsx(n,{variant:"body2",style:{marginBottom:"8px",lineHeight:"1.5",color:"#333"},children:t.description}),t.image&&e.jsx("img",{src:t.image,alt:"Announcement",style:{maxWidth:"100%",height:"auto",borderRadius:"4px",marginBottom:"8px"}}),e.jsxs(n,{variant:"caption",style:{color:"#666",fontSize:"0.75rem",fontStyle:"italic"},children:["Posted: ",v(t.createdAt)]})]},t.id)),e.jsx("div",{style:{textAlign:"center",marginTop:"10px"},children:e.jsx("button",{onClick:x,style:{background:"#184a5b",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},disabled:r,children:r?"Loading...":"Refresh"})})]}):e.jsx(n,{variant:"body1",className:"AnnouncementText",children:"There are no announcements at the moment."})})]})})]})]})};A.__docgenInfo={description:"",methods:[],displayName:"DashboardContent"};export{A as D};
