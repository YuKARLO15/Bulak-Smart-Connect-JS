import{r as s}from"./iframe-brDamC9w.js";import{c as ct}from"./clsx-B-dksMZM.js";import{j as A}from"./jsx-runtime-CjwXaGRr.js";import{s as V,u as ut,c as ft,r as St}from"./DefaultPropsProvider-DBMNCaPD.js";import{b as dt,g as mt}from"./identifier-ByeiLM5l.js";import{u as G}from"./useSlot-Dsi-5i_0.js";import{u as Ct}from"./useSlotProps-CKJG-oxv.js";import{i as Rt}from"./isHostComponent-DVu5iVWx.js";import{P as Et}from"./Paper-CUgrQIwR.js";import{o as Q}from"./utils-FdyRZg6t.js";import{g as kt,o as Z,M as Tt}from"./Modal-BW3saaeB.js";import{d as Dt}from"./debounce-Be36O1Ab.js";import{G as Ft}from"./Grow-DIqg6XZW.js";import{m as Lt}from"./mergeSlotProps-By6iUkp4.js";import{b as It,u as Ot}from"./CircularProgress-B5Sc7MgM.js";import{L as Kt}from"./List-DcfqQNdJ.js";const zt=s.createContext(),Ht=()=>s.useContext(zt)??!1;function q(e,t,o){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:o?null:e.firstChild}function it(e,t,o){return e===t?o?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:o?null:e.lastChild}function ht(e,t){if(t===void 0)return!0;let o=e.innerText;return o===void 0&&(o=e.textContent),o=o.trim().toLowerCase(),o.length===0?!1:t.repeating?o[0]===t.keys[0]:o.startsWith(t.keys.join(""))}function $(e,t,o,E,w,g){let P=!1,f=w(e,t,t?o:!1);for(;f;){if(f===e.firstChild){if(P)return!1;P=!0}const m=E?!1:f.disabled||f.getAttribute("aria-disabled")==="true";if(!f.hasAttribute("tabindex")||!ht(f,g)||m)f=w(e,f,o);else return f.focus(),!0}return!1}const jt=s.forwardRef(function(t,o){const{actions:E,autoFocus:w=!1,autoFocusItem:g=!1,children:P,className:f,disabledItemsFocusable:m=!1,disableListWrap:C=!1,onKeyDown:k,variant:O="selectedMenu",...z}=t,l=s.useRef(null),y=s.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});It(()=>{w&&l.current.focus()},[w]),s.useImperativeHandle(E,()=>({adjustStyleForScrollbar:(r,{direction:a})=>{const p=!l.current.style.width;if(r.clientHeight<l.current.clientHeight&&p){const M=`${kt(Z(r))}px`;l.current.style[a==="rtl"?"paddingLeft":"paddingRight"]=M,l.current.style.width=`calc(100% + ${M})`}return l.current}}),[]);const H=r=>{const a=l.current,p=r.key;if(r.ctrlKey||r.metaKey||r.altKey){k&&k(r);return}const T=Q(a).activeElement;if(p==="ArrowDown")r.preventDefault(),$(a,T,C,m,q);else if(p==="ArrowUp")r.preventDefault(),$(a,T,C,m,it);else if(p==="Home")r.preventDefault(),$(a,null,C,m,q);else if(p==="End")r.preventDefault(),$(a,null,C,m,it);else if(p.length===1){const c=y.current,R=p.toLowerCase(),K=performance.now();c.keys.length>0&&(K-c.lastTime>500?(c.keys=[],c.repeating=!0,c.previousKeyMatched=!0):c.repeating&&R!==c.keys[0]&&(c.repeating=!1)),c.lastTime=K,c.keys.push(R);const D=T&&!c.repeating&&ht(T,c);c.previousKeyMatched&&(D||$(a,T,!1,m,q,c))?r.preventDefault():c.previousKeyMatched=!1}k&&k(r)},F=Ot(l,o);let i=-1;s.Children.forEach(P,(r,a)=>{if(!s.isValidElement(r)){i===a&&(i+=1,i>=P.length&&(i=-1));return}r.props.disabled||(O==="selectedMenu"&&r.props.selected||i===-1)&&(i=a),i===a&&(r.props.disabled||r.props.muiSkipListHighlight||r.type.muiSkipListHighlight)&&(i+=1,i>=P.length&&(i=-1))});const b=s.Children.map(P,(r,a)=>{if(a===i){const p={};return g&&(p.autoFocus=!0),r.props.tabIndex===void 0&&O==="selectedMenu"&&(p.tabIndex=0),s.cloneElement(r,p)}return r});return A.jsx(Kt,{role:"menu",ref:F,className:f,onKeyDown:H,tabIndex:w?0:-1,...z,children:b})});function Nt(e){return dt("MuiPopover",e)}mt("MuiPopover",["root","paper"]);function lt(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.height/2:t==="bottom"&&(o=e.height),o}function at(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.width/2:t==="right"&&(o=e.width),o}function pt(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function J(e){return typeof e=="function"?e():e}const At=e=>{const{classes:t}=e;return ft({root:["root"],paper:["paper"]},Nt,t)},Wt=V(Tt,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),gt=V(Et,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ut=s.forwardRef(function(t,o){const E=ut({props:t,name:"MuiPopover"}),{action:w,anchorEl:g,anchorOrigin:P={vertical:"top",horizontal:"left"},anchorPosition:f,anchorReference:m="anchorEl",children:C,className:k,container:O,elevation:z=8,marginThreshold:l=16,open:y,PaperProps:H={},slots:F={},slotProps:i={},transformOrigin:b={vertical:"top",horizontal:"left"},TransitionComponent:r,transitionDuration:a="auto",TransitionProps:p={},disableScrollLock:M=!1,...T}=E,c=s.useRef(),R={...E,anchorOrigin:P,anchorReference:m,elevation:z,marginThreshold:l,transformOrigin:b,TransitionComponent:r,transitionDuration:a,TransitionProps:p},K=At(R),D=s.useCallback(()=>{if(m==="anchorPosition")return f;const n=J(g),d=(n&&n.nodeType===1?n:Q(c.current).body).getBoundingClientRect();return{top:d.top+lt(d,P.vertical),left:d.left+at(d,P.horizontal)}},[g,P.horizontal,P.vertical,f,m]),L=s.useCallback(n=>({vertical:lt(n,b.vertical),horizontal:at(n,b.horizontal)}),[b.horizontal,b.vertical]),_=s.useCallback(n=>{const h={width:n.offsetWidth,height:n.offsetHeight},d=L(h);if(m==="none")return{top:null,left:null,transformOrigin:pt(d)};const U=D();let j=U.top-d.vertical,N=U.left-d.horizontal;const et=j+h.height,ot=N+h.width,rt=Z(J(g)),nt=rt.innerHeight-l,st=rt.innerWidth-l;if(l!==null&&j<l){const S=j-l;j-=S,d.vertical+=S}else if(l!==null&&et>nt){const S=et-nt;j-=S,d.vertical+=S}if(l!==null&&N<l){const S=N-l;N-=S,d.horizontal+=S}else if(ot>st){const S=ot-st;N-=S,d.horizontal+=S}return{top:`${Math.round(j)}px`,left:`${Math.round(N)}px`,transformOrigin:pt(d)}},[g,m,D,L,l]),[X,B]=s.useState(y),x=s.useCallback(()=>{const n=c.current;if(!n)return;const h=_(n);h.top!==null&&n.style.setProperty("top",h.top),h.left!==null&&(n.style.left=h.left),n.style.transformOrigin=h.transformOrigin,B(!0)},[_]);s.useEffect(()=>(M&&window.addEventListener("scroll",x),()=>window.removeEventListener("scroll",x)),[g,M,x]);const Y=()=>{x()},I=()=>{B(!1)};s.useEffect(()=>{y&&x()}),s.useImperativeHandle(w,()=>y?{updatePosition:()=>{x()}}:null,[y,x]),s.useEffect(()=>{if(!y)return;const n=Dt(()=>{x()}),h=Z(g);return h.addEventListener("resize",n),()=>{n.clear(),h.removeEventListener("resize",n)}},[g,y,x]);let u=a;const v={slots:{transition:r,...F},slotProps:{transition:p,paper:H,...i}},[W,Pt]=G("transition",{elementType:Ft,externalForwardedProps:v,ownerState:R,getSlotProps:n=>({...n,onEntering:(h,d)=>{var U;(U=n.onEntering)==null||U.call(n,h,d),Y()},onExited:h=>{var d;(d=n.onExited)==null||d.call(n,h),I()}}),additionalProps:{appear:!0,in:y}});a==="auto"&&!W.muiSupportAuto&&(u=void 0);const yt=O||(g?Q(J(g)).body:void 0),[tt,{slots:vt,slotProps:bt,...wt}]=G("root",{ref:o,elementType:Wt,externalForwardedProps:{...v,...T},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:F.backdrop},slotProps:{backdrop:Lt(typeof i.backdrop=="function"?i.backdrop(R):i.backdrop,{invisible:!0})},container:yt,open:y},ownerState:R,className:ct(K.root,k)}),[Mt,xt]=G("paper",{ref:c,className:K.paper,elementType:gt,externalForwardedProps:v,shouldForwardComponentProp:!0,additionalProps:{elevation:z,style:X?void 0:{opacity:0}},ownerState:R});return A.jsx(tt,{...wt,...!Rt(tt)&&{slots:vt,slotProps:bt,disableScrollLock:M},children:A.jsx(W,{...Pt,timeout:u,children:A.jsx(Mt,{...xt,children:C})})})});function $t(e){return dt("MuiMenu",e)}mt("MuiMenu",["root","paper","list"]);const Gt={vertical:"top",horizontal:"right"},Vt={vertical:"top",horizontal:"left"},_t=e=>{const{classes:t}=e;return ft({root:["root"],paper:["paper"],list:["list"]},$t,t)},Bt=V(Ut,{shouldForwardProp:e=>St(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Xt=V(gt,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Yt=V(jt,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),fe=s.forwardRef(function(t,o){const E=ut({props:t,name:"MuiMenu"}),{autoFocus:w=!0,children:g,className:P,disableAutoFocusItem:f=!1,MenuListProps:m={},onClose:C,open:k,PaperProps:O={},PopoverClasses:z,transitionDuration:l="auto",TransitionProps:{onEntering:y,...H}={},variant:F="selectedMenu",slots:i={},slotProps:b={},...r}=E,a=Ht(),p={...E,autoFocus:w,disableAutoFocusItem:f,MenuListProps:m,onEntering:y,PaperProps:O,transitionDuration:l,TransitionProps:H,variant:F},M=_t(p),T=w&&!f&&k,c=s.useRef(null),R=(u,v)=>{c.current&&c.current.adjustStyleForScrollbar(u,{direction:a?"rtl":"ltr"}),y&&y(u,v)},K=u=>{u.key==="Tab"&&(u.preventDefault(),C&&C(u,"tabKeyDown"))};let D=-1;s.Children.map(g,(u,v)=>{s.isValidElement(u)&&(u.props.disabled||(F==="selectedMenu"&&u.props.selected||D===-1)&&(D=v))});const L={slots:i,slotProps:{list:m,transition:H,paper:O,...b}},_=Ct({elementType:i.root,externalSlotProps:b.root,ownerState:p,className:[M.root,P]}),[X,B]=G("paper",{className:M.paper,elementType:Xt,externalForwardedProps:L,shouldForwardComponentProp:!0,ownerState:p}),[x,Y]=G("list",{className:ct(M.list,m.className),elementType:Yt,shouldForwardComponentProp:!0,externalForwardedProps:L,getSlotProps:u=>({...u,onKeyDown:v=>{var W;K(v),(W=u.onKeyDown)==null||W.call(u,v)}}),ownerState:p}),I=typeof L.slotProps.transition=="function"?L.slotProps.transition(p):L.slotProps.transition;return A.jsx(Bt,{onClose:C,anchorOrigin:{vertical:"bottom",horizontal:a?"right":"left"},transformOrigin:a?Gt:Vt,slots:{root:i.root,paper:X,backdrop:i.backdrop,...i.transition&&{transition:i.transition}},slotProps:{root:_,paper:B,backdrop:typeof b.backdrop=="function"?b.backdrop(p):b.backdrop,transition:{...I,onEntering:(...u)=>{var v;R(...u),(v=I==null?void 0:I.onEntering)==null||v.call(I,...u)}}},open:k,ref:o,transitionDuration:l,ownerState:p,...r,classes:z,children:A.jsx(x,{actions:c,autoFocus:w&&(D===-1||f),autoFocusItem:T,variant:F,...Y,children:g})})});export{fe as M};
