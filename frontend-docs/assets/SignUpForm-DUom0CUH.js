import{j as s}from"./jsx-runtime-Ds-gkUgj.js";import{r as d}from"./index-CtvPRVHf.js";import{F as b}from"./FullName-DomREuHN.js";import{C as S}from"./ContactInformation-BsP5vkLv.js";import{U as y}from"./UpdateCheckbox-BgZysV8m.js";import{N as P}from"./NavBar-CGkVb6KX.js";import{D as F}from"./DataPrivacy-CePSuH4g.js";/* empty css                   */import{a as U}from"./api-DLOjWVc5.js";import{u as q,L as k}from"./chunk-AYJ5UCUI-CkRdRQ96.js";const x=({formData:e,handleInputChange:l,errors:i,setErrors:n})=>{const u=o=>{const{name:g,value:f}=o.target;l(o),g==="confirmpassword"&&(e.password!==f?n({...i,confirmpassword:"Passwords do not match"}):n({...i,confirmpassword:""}))};return d.useEffect(()=>{e.password===e.confirmpassword&&n(o=>({...o,confirmpassword:""}))},[e.password,e.confirmpassword,n]),s.jsxs("div",{className:"form-group inline",id:"section1",children:[s.jsxs("div",{className:"form-control",id:"username-container",children:[s.jsxs("label",{className:"labels",children:["Username ",s.jsx("span",{className:"asterisk",children:" *"})]}),s.jsx("input",{type:"text",name:"username",placeholder:"Enter your username",value:e.username,onChange:l,required:!0}),s.jsx("span",{className:"error-message",children:i.username})]}),s.jsxs("div",{className:"form-control",id:"password-container",children:[s.jsxs("label",{className:"labels",children:["Password ",s.jsx("span",{className:"asterisk",children:" *"})]}),s.jsx("input",{type:"password",name:"password",placeholder:"•••••••••",value:e.password,onChange:l,required:!0}),s.jsx("span",{className:"error-message",children:i.password})]}),s.jsxs("div",{className:"form-control",id:"password-container",children:[s.jsxs("label",{className:"labels",children:["Confirm Password ",s.jsx("span",{className:"asterisk",children:" *"})," ",s.jsx("span",{className:"error-message-password",children:i.confirmpassword})]}),s.jsx("input",{type:"password",name:"confirmpassword",placeholder:"•••••••••",value:e.confirmpassword,onChange:u,required:!0})]})]})};x.__docgenInfo={description:"",methods:[],displayName:"UsernamePasswordSection"};const E=()=>{const[e,l]=d.useState({username:"",password:"",confirmpassword:"",lastname:"",firstname:"",middlename:"",contact:"",email:"",updates:!1,age:"",hasExtension:!1,extension:""}),[i,n]=d.useState({}),[u,o]=d.useState(!1),[g,f]=d.useState(!1),w=q(),m=r=>{const{name:a,value:c,type:t,checked:h}=r.target;if(a==="contact"){const p=c.replace(/\D/g,"");p.length<=11&&l(v=>({...v,contact:p}))}else l(p=>({...p,[a]:t==="checkbox"?h:c}))},j=r=>{let a={};return r.username?r.username.length<4&&(a.username="Username must be at least 4 characters"):a.username="Username is required",r.email?/\S+@\S+\.\S+/.test(r.email)||(a.email="Email is invalid"):a.email="Email is required",r.password||(a.password="Password is required"),r.confirmpassword||(a.confirmpassword="Password is required"),r.password!==r.confirmpassword&&(a.confirmpassword="Passwords do not match"),r.lastname||(a.lastname="Last name is required"),r.firstname||(a.firstname="First name is required"),a},N=async r=>{var c;r.preventDefault(),console.log("Form submitted"),console.log("Form data at submission:",e);const a=j(e);if(console.log("Validation errors:",a),n(a),Object.keys(a).length===0){console.log("Form valid, attempting registration with:",e);try{o(!0),await U.register({username:e.username,email:e.email,password:e.password,firstName:e.firstname,lastName:e.lastname,...e.middlename&&{middleName:e.middlename},contact:e.contact,name:`${e.firstname} ${e.middlename?e.middlename+" ":""}${e.lastname}`}),o(!1),f(!0),setTimeout(()=>{w("/LogIn")},2e3)}catch(t){if(o(!1),console.log("Error response:",t.response),t.response)if(t.response.status===409)n({...a,email:"This email is already registered"});else{const h=((c=t.response.data)==null?void 0:c.message)||"Registration failed. Please try again.";n({...a,submit:h})}else n({...a,submit:"Registration failed. Please try again."});console.error("Registration error:",t)}}};return s.jsxs("div",{className:"signup-container",children:[s.jsx("div",{className:"Navigation",children:s.jsx(P,{})}),s.jsx("h2",{children:"Signup Form"}),s.jsxs("form",{onSubmit:N,children:[s.jsx(b,{formData:e,handleInputChange:m,errors:i}),s.jsx(x,{formData:e,handleInputChange:m,errors:i,setErrors:n}),s.jsx(S,{formData:e,handleInputChange:m,errors:i}),s.jsx(F,{formData:e,handleInputChange:m}),s.jsx(y,{formData:e,handleInputChange:m}),u&&s.jsx("div",{className:"loading-message",children:"Loading..."}),g&&s.jsx("div",{className:"success-message",children:"Registration successful! Redirecting to login..."}),i.email&&s.jsx("div",{className:"error-message",style:{textAlign:"center",marginBottom:"10px",color:"red"},children:i.email}),i.submit&&s.jsx("div",{className:"error-message",style:{textAlign:"center",marginBottom:"10px",color:"red"},children:i.submit}),s.jsx("button",{type:"submit",className:"btn",children:"Signup"}),s.jsxs("div",{className:"footer",children:["Already have an account? ",s.jsx(k,{to:"/LogIn",children:"Sign in"})]})]})]})};E.__docgenInfo={description:"",methods:[],displayName:"SignUpForm"};export{E as S,x as U};
