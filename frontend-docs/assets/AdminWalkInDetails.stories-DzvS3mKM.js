import{j as a}from"./jsx-runtime-Ds-gkUgj.js";import{r as o}from"./index-CtvPRVHf.js";import{q as E}from"./queueService-0La2rzTZ.js";import{a as Q}from"./api-BRrcjE0F.js";import{u as S,b as _}from"./chunk-AYJ5UCUI-CkRdRQ96.js";const u=()=>{const d=S(),{id:r}=_(),[s,f]=o.useState(null),[N,m]=o.useState(!0),[p,h]=o.useState(null),w=e=>{if(typeof e=="string"&&e.startsWith("WK"))return e;if(!e)return"WK000";const l=e!=null&&e.includes("-")?e.split("-")[1]:e,C=parseInt(l,10)||0;return`WK${String(C).padStart(3,"0")}`};o.useEffect(()=>{(async()=>{if(!r){h("No queue ID provided"),m(!1);return}try{m(!0);const l=await E.fetchQueueDetails(r);console.log("Queue details fetched:",l),f(l),h(null)}catch(l){console.error("Error fetching queue details:",l),h("Failed to load queue details")}finally{m(!1)}})()},[r]);const v=async()=>{try{await Q.patch(`http://localhost:3000/queue/${r}`,{status:"completed"}),alert("Queue marked as complete!"),d(-1)}catch(e){console.error("Error completing queue:",e),alert("Failed to complete queue")}};if(N)return a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{style:{marginLeft:"12px"},children:"Loading queue details..."})]});if(p)return a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",color:"#721c24",background:"#f8d7da",padding:"20px",borderRadius:"8px"},children:[a.jsx("p",{children:p}),a.jsx("button",{onClick:()=>d(-1),style:{marginTop:"16px",background:"#1C4D5A",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"Go Back"})]});const i=(s==null?void 0:s.queue)||{},n=(s==null?void 0:s.details)||{},c=n.user||{},g=w(i.queueNumber||i.id),b=n.firstName||c.firstName||i.firstName||"",y=n.lastName||c.lastName||i.lastName||"",I=n.middleInitial||c.middleInitial||"",D=n.phoneNumber||c.phoneNumber||"",W=n.reasonOfVisit||i.reason||i.reasonOfVisit||"";return a.jsxs("div",{children:[a.jsxs("div",{className:"admin-walkin-details-header-bar",children:[a.jsx("button",{className:"admin-walkin-details-menu-btn",onClick:()=>d(-1),"aria-label":"Back",children:a.jsxs("span",{className:"admin-walkin-details-menu-icon",children:[a.jsx("span",{className:"admin-walkin-details-menu-bar"}),a.jsx("span",{className:"admin-walkin-details-menu-bar"}),a.jsx("span",{className:"admin-walkin-details-menu-bar"})]})}),a.jsx("h1",{className:"admin-walkin-details-header-title",children:"Walk - in Details"})]}),a.jsx("div",{className:"admin-walkin-details-container",children:a.jsxs("div",{className:"admin-walkin-details-card",children:[a.jsxs("div",{className:"admin-walkin-details-row admin-walkin-details-row-header",children:[a.jsx("span",{className:"admin-walkin-details-label-header",children:"Walk-in Number:"}),a.jsx("span",{className:"admin-walkin-details-value-header",children:g})]}),a.jsxs("div",{className:"admin-walkin-details-info",children:[a.jsxs("div",{className:"admin-walkin-details-col",children:[a.jsxs("div",{children:[a.jsx("span",{className:"admin-walkin-details-label",children:"Last Name:"}),a.jsx("div",{className:"admin-walkin-details-value",children:y})]}),a.jsxs("div",{children:[a.jsx("span",{className:"admin-walkin-details-label",children:"Phone Number:"}),a.jsx("div",{className:"admin-walkin-details-value",children:D})]})]}),a.jsxs("div",{className:"admin-walkin-details-col",children:[a.jsxs("div",{children:[a.jsx("span",{className:"admin-walkin-details-label",children:"First Name:"}),a.jsx("div",{className:"admin-walkin-details-value",children:b})]}),a.jsxs("div",{children:[a.jsx("span",{className:"admin-walkin-details-label",children:"Reason of Visit:"}),a.jsx("div",{className:"admin-walkin-details-value",children:W})]})]}),a.jsx("div",{className:"admin-walkin-details-col",children:a.jsxs("div",{children:[a.jsx("span",{className:"admin-walkin-details-label",children:"Middle Initial:"}),a.jsx("div",{className:"admin-walkin-details-value",children:I})]})})]}),a.jsxs("div",{className:"admin-walkin-details-actions",children:[a.jsx("button",{className:"admin-walkin-details-cancel-btn",onClick:()=>d(-1),children:"Cancel"}),a.jsx("button",{className:"admin-walkin-details-complete-btn",onClick:v,children:"Complete"})]})]})})]})};u.__docgenInfo={description:"",methods:[],displayName:"AdminWalkInDetails"};const V={title:"Components/AdminWalkInDetails",component:u},t=()=>a.jsx(u,{});t.__docgenInfo={description:"",methods:[],displayName:"Default"};var x,k,j;t.parameters={...t.parameters,docs:{...(x=t.parameters)==null?void 0:x.docs,source:{originalSource:"() => <AdminWalkInDetails />",...(j=(k=t.parameters)==null?void 0:k.docs)==null?void 0:j.source}}};const F=["Default"];export{t as Default,F as __namedExportsOrder,V as default};
