import{j as e}from"./jsx-runtime-Ds-gkUgj.js";import{r}from"./index-CtvPRVHf.js";import{C as E}from"./Calendar-Ccdq6xBc.js";import{s as y}from"./RecentAppointmentData-yblrwM7G.js";import{u as F}from"./chunk-AYJ5UCUI-CkRdRQ96.js";const w=({onBack:h,preselectedDate:m})=>{const f=F(),[u,g]=r.useState(!0),[B,v]=r.useState(null),[c,M]=r.useState({lastName:"Francisco",firstName:"Luan",middleInitial:"D",address:"123 Main St, Evetywhere, Bulacan",phoneNumber:"09124458403"}),[s,l]=r.useState({lastName:"",firstName:"",middleInitial:"",address:"",phoneNumber:"",reason:"",date:"",time:""}),[n,C]=r.useState({}),[p,N]=r.useState(m),[b,x]=r.useState(!1),j=a=>{v(a),g(!1),a&&l({...s,lastName:c.lastName,firstName:c.firstName,middleInitial:c.middleInitial,address:c.address,phoneNumber:c.phoneNumber})};r.useEffect(()=>{m&&(N(m),l({...s,date:m.toLocaleDateString()}))},[m]);const S=(()=>{const a=[];let t=8,i=0;for(;t<17;){let d=`${t}:${i===0?"00":"30"} ${t<12?"AM":"PM"}`;i+=30,i===60&&(i=0,t+=1);let A=`${t}:${i===0?"00":"30"} ${t<12?"AM":"PM"}`;a.push(`${d} - ${A}`)}return a})(),o=a=>{l({...s,[a.target.name]:a.target.value})},D=a=>{const t=a.target.value;/^\d*$/.test(t)&&t.length<=11&&l({...s,phoneNumber:t})},I=a=>{a.getDay()===0||a.getDay()===6?x(!0):(x(!1),N(a),l({...s,date:a.toLocaleDateString()}))},T=()=>{let a={};if(Object.keys(s).forEach(d=>{s[d]||(a[d]="This field is required.")}),Object.keys(a).length>0){C(a);return}const t=`APPT-${Date.now()}`,i={id:t,type:s.reason,date:s.date,time:s.time,lastName:s.lastName,firstName:s.firstName,middleInitial:s.middleInitial,address:s.address,phoneNumber:s.phoneNumber};y(i),alert("Appointment Confirmed!"),f(`/QRCodeAppointment/${t}`,{state:{appointment:i}}),l({lastName:"",firstName:"",middleInitial:"",address:"",phoneNumber:"",reason:"",date:"",time:""})};return e.jsxs("div",{className:"AppointmentFormsContainer",children:[u&&e.jsx("div",{className:"DialogOverlay",children:e.jsxs("div",{className:"DialogBox",children:[h&&e.jsx("button",{className:"DialogBackButton",onClick:h,children:"X"}),e.jsx("h3",{className:"DialogText",children:"Who is this appointment for?"}),e.jsxs("div",{className:"DialogButtons",children:[e.jsx("button",{className:"DialogButton SelfButton",onClick:()=>j(!0),children:"For Myself"}),e.jsx("button",{className:"DialogButton OtherButton",onClick:()=>j(!1),children:"For Someone Else"})]})]})}),!u&&e.jsxs("div",{className:"AppointmentFContainer",children:[e.jsx("h2",{className:"AppointmentTitle",children:"APPOINTMENT FORM"}),e.jsxs("div",{className:"FormGroup RowGroup",children:[e.jsxs("div",{className:"InputWrapper",children:[e.jsx("label",{children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",value:s.lastName,onChange:o}),n.lastName&&e.jsx("span",{className:"ErrorText",children:n.lastName})]}),e.jsxs("div",{className:"InputWrapper",children:[e.jsx("label",{children:"First Name"}),e.jsx("input",{type:"text",name:"firstName",value:s.firstName,onChange:o}),n.firstName&&e.jsx("span",{className:"ErrorText",children:n.firstName})]}),e.jsxs("div",{className:"InputWrapper SmallInput",children:[e.jsx("label",{children:"Middle Initial"}),e.jsx("input",{type:"text",name:"middleInitial",value:s.middleInitial,onChange:o})]})]}),e.jsxs("div",{className:"FormGroup RowGroup",children:[e.jsxs("div",{className:"InputWrapper LargeInput",children:[e.jsx("label",{children:"Address"}),e.jsx("input",{type:"text",name:"address",value:s.address,onChange:o}),n.address&&e.jsx("span",{className:"ErrorText",children:n.address})]}),e.jsxs("div",{className:"InputWrapper",children:[e.jsx("label",{children:"Phone Number"}),e.jsx("input",{type:"text",name:"phoneNumber",value:s.phoneNumber,onChange:D,maxLength:"11"}),n.phoneNumber&&e.jsx("span",{className:"ErrorText",children:n.phoneNumber})]})]}),e.jsxs("div",{className:"FormGroup SlotGroup",children:[e.jsxs("div",{className:"InputWrapper AppointTime",children:[e.jsx("label",{children:"Reason for Visit"}),e.jsxs("select",{name:"reason",value:s.reason,onChange:o,children:[e.jsx("option",{value:"",children:"Select a Reason"}),e.jsx("option",{value:"Birth Certificate",children:"Birth Certificate"}),e.jsx("option",{value:"Marriage Certificate",children:"Marriage Certificate"}),e.jsx("option",{value:"Death Certificate",children:"Death Certificate"})]}),n.reason&&e.jsx("span",{className:"ErrorText",children:n.reason})]}),e.jsxs("div",{className:"InputWrapper AppointTime",children:[e.jsx("label",{className:"AppointTimeSelected",children:"Select Time"}),e.jsxs("select",{name:"time",value:s.time,onChange:o,children:[e.jsx("option",{value:"",children:"Select a Time Slot"}),S.map((a,t)=>e.jsx("option",{value:a,children:a},t))]}),n.time&&e.jsx("span",{className:"ErrorText",children:n.time})]})]}),e.jsxs("div",{className:"FormGroup RowGroup",children:[e.jsxs("div",{className:"InputWrapper",children:[e.jsx("label",{children:"Select Date of Visit"}),e.jsx(E,{className:"Calendar",onChange:I,value:p,tileDisabled:({date:a})=>a.getDay()===0||a.getDay()===6||a<new Date}),n.date&&e.jsx("span",{className:"ErrorText",children:n.date}),b&&e.jsx("span",{className:"ErrorText",children:"Office is closed on weekends."}),p&&e.jsxs("div",{className:"SelectedDateInfo",children:["Selected: ",p.toLocaleDateString()]})]}),e.jsx("div",{className:"ConfirmContainer",children:e.jsx("button",{className:"ConfirmButton",onClick:T,children:"Confirm"})})]})]})]})};w.__docgenInfo={description:"",methods:[],displayName:"AppointmentContainer"};export{w as A};
