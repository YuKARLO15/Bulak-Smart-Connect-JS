import{j as t}from"./jsx-runtime-Ds-gkUgj.js";import{r as u}from"./index-CtvPRVHf.js";import{C as O}from"./ChildIdentifyingForm-DsdeCrbg.js";import{M as D}from"./MotherIdentifyingForm-B7f1pksP.js";import{F as k}from"./FatherIdentifyingForm-BBcbeuZJ.js";import{M as P}from"./MarriageIdentifyingForm-6TgIfGhD.js";import{A as R}from"./BirthBackIdentifyingForm-DB4An-Pe.js";import{B as T}from"./Box-CiLytvgs.js";import{T as J}from"./Typography-bP-jEqOD.js";import{P as L}from"./Paper-CUixK3Wn.js";import{B as n}from"./Button-DiC-o-A5.js";import{u as M,a as _}from"./chunk-AYJ5UCUI-CkRdRQ96.js";import"./FormControl-Dh6MlF-N.js";import"./clsx-B-dksMZM.js";import"./utils-DoM3o7-Q.js";import"./useFormControl-C6wgLNXN.js";import"./createTheme-CEEQiKg8.js";import"./DefaultPropsProvider-BmwwqBPg.js";import"./isMuiElement-BCxDYgeU.js";import"./RadioGroup-Bsr7CVgM.js";import"./FormControlLabel-CjFk612N.js";import"./useSlot-C9vuPqXJ.js";import"./CircularProgress-CxdDrrre.js";import"./createSimplePaletteValueFilter-Bxcyfoq9.js";import"./useControlled-DpwJ4E9h.js";import"./createSvgIcon-Bysyal0j.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Grid-B96pV0rY.js";import"./useTheme-BaXXVSuK.js";import"./extendSxProp-mB04pl9k.js";import"./TextField-2zIfW9q2.js";import"./OutlinedInput-DxROrNRt.js";import"./isHostComponent-DVu5iVWx.js";import"./Modal-D7YpB11p.js";import"./index-COGUMIcY.js";import"./index-W1kuYZ3C.js";import"./debounce-Be36O1Ab.js";import"./Menu-uXKDJr43.js";import"./mergeSlotProps-By6iUkp4.js";import"./List-DA57XQw0.js";import"./MenuItem-C3OsSUty.js";import"./listItemTextClasses-C0bxBNAG.js";import"./dividerClasses-CdUxlXeo.js";import"./Alert-DwyBMc6h.js";const S=()=>{var y;const[l,x]=u.useState(1),[r,d]=u.useState({}),[h,A]=u.useState({}),F=M(),c=((y=_().state)==null?void 0:y.isEditing)||localStorage.getItem("isEditingBirthApplication")==="true";u.useEffect(()=>{if(c)try{console.log("Loading data for editing...");const i=localStorage.getItem("editingApplicationId");console.log("Editing application ID:",i);const o=JSON.parse(localStorage.getItem("applications")||"[]").find(a=>a.id===i);if(o&&o.formData)console.log("Found application to edit:",o),d(o.formData);else{const a=localStorage.getItem("birthCertificateApplication");a?(d(JSON.parse(a)),console.log("Loaded form data from birthCertificateApplication")):console.warn("No application data found for editing")}}catch(i){console.error("Error loading data for editing:",i)}else console.log("Starting with new application - clearing form data"),d({}),localStorage.removeItem("birthCertificateApplication");return()=>{c||localStorage.setItem("birthCertificateApplication",JSON.stringify(r))}},[c]);const m=i=>{const{name:e,value:o,type:a,checked:s}=i.target;d(C=>({...C,[e]:a==="checkbox"?s:o})),Object.keys(r).length>0&&localStorage.setItem("birthCertificateApplication",JSON.stringify({...r,[e]:a==="checkbox"?s:o}))},j={1:["lastName","firstName","birthMonth","birthDay","birthYear","sex","hospital","city","province","barangay","residence","typeOfBirth","birthOrder","birthWeight"],2:["motherLastName","motherFirstName","motherCitizenship","motherReligion","motherTotalChildren","motherLivingChildren","motherDeceasedChildren","motherOccupation","motherAge","motherStreet","motherCity"],3:["fatherLastName","fatherFirstName","fatherCitizenship","fatherReligion","fatherOccupation","fatherAge","fatherStreet","fatherBarangay","fatherCity","fatherProvince","fatherCountry"],4:[],5:[]},b=()=>{var e;const i={};return l===3&&r.notAcknowledgedByFather?!0:((e=j[l])==null||e.forEach(o=>{(!r[o]||r[o].toString().trim()==="")&&(i[o]="This field is required")}),A(i),Object.keys(i).length===0)},g=()=>{b()&&x(i=>i+1)},f=()=>{x(i=>i-1)},w=i=>{i&&i.preventDefault();try{let e;c?(e=localStorage.getItem("editingApplicationId"),console.log("Editing existing application:",e)):(e="BC-"+Date.now().toString().slice(-6),console.log("Creating new application:",e));const o=localStorage.getItem("selectedBirthCertificateOption")||"Regular application",a={id:e,type:"Birth Certificate",applicationType:o,date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric"}),status:c&&localStorage.getItem("currentApplicationStatus")||"Pending",message:`Birth Certificate application for ${r.firstName||""} ${r.lastName||""}`,formData:r,lastUpdated:new Date().toISOString()},s=JSON.parse(localStorage.getItem("applications")||"[]");if(c){const B=s.findIndex(E=>E.id===e);B>=0?(s[B]=a,console.log("Updated existing application at index:",B)):(s.push(a),console.log("Added new application (was editing but not found):",e))}else s.push(a),console.log("Added new application:",e);localStorage.setItem("applications",JSON.stringify(s)),localStorage.setItem("currentApplicationId",e),localStorage.setItem("birthCertificateApplication",JSON.stringify(r)),localStorage.removeItem("isEditingBirthApplication"),localStorage.removeItem("editingApplicationId"),localStorage.removeItem("editingApplication"),window.dispatchEvent(new Event("storage"));const C=new CustomEvent("customStorageUpdate",{detail:{id:e,type:"Birth Certificate",action:c?"updated":"created"}});window.dispatchEvent(C),F(c?"/BirthApplicationSummary":{"Regular application":"/BirthApplicationSummary","Request copy":"/RequestACopyBirthCertificate","Above 18":"/Above18Registration","Below 18":"/Below18Registration","Foreign Parent":"/DelayedOneParentForeignerRegistration","Out of town":"/DelayedOutOfTownRegistration","Clerical Error":"/ClericalErrorApplication","Sex DOB":"/SexDobCorrection","First Name":"/FirstNameCorrection"}[o]||"/BirthApplicationSummary")}catch(e){console.error("Error submitting form:",e),alert("There was a problem submitting your application. Please try again.")}};return t.jsxs(T,{className:"BirthCertificateFormContainer",children:[t.jsx(J,{variant:"h4",className:"BirthCertificateFormTitle",children:"Birth Certificate Application Form"}),t.jsxs(L,{className:"BirthCertificateForm",elevation:3,children:[l===1&&t.jsxs(t.Fragment,{children:[t.jsx(O,{formData:r,handleChange:m,errors:h}),t.jsx(n,{variant:"contained",onClick:g,className:"BirthCertificateFormButton",children:"Next"})]}),l===2&&t.jsxs(t.Fragment,{children:[t.jsx(D,{formData:r,handleChange:m,errors:h}),t.jsx(n,{variant:"contained",onClick:f,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(n,{variant:"contained",onClick:g,className:"BirthCertificateFormButton",children:"Next"})]}),l===3&&t.jsxs(t.Fragment,{children:[t.jsx(k,{formData:r,handleChange:m,errors:h}),t.jsx(n,{variant:"contained",onClick:f,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(n,{variant:"contained",onClick:g,className:"BirthCertificateFormButton",children:"Next"})]}),l===4&&t.jsxs(t.Fragment,{children:[t.jsx(P,{formData:r,handleChange:m,errors:h}),t.jsx(n,{variant:"contained",onClick:f,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(n,{variant:"contained",onClick:g,className:"BirthCertificateFormButton",children:"Next"})]}),l===5&&t.jsxs(t.Fragment,{children:[t.jsx(R,{formData:r,handleChange:m}),t.jsx(n,{variant:"contained",onClick:f,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(n,{variant:"contained",onClick:w,className:"BirthCertificateFormButton",children:"Submit"})]})]})]})};S.__docgenInfo={description:"",methods:[],displayName:"BirthCertificateForm"};const kt={title:"Components/BirthCertificateForm",component:S},p=()=>t.jsx(S,{});p.__docgenInfo={description:"",methods:[],displayName:"Default"};var N,v,I;p.parameters={...p.parameters,docs:{...(N=p.parameters)==null?void 0:N.docs,source:{originalSource:"() => <BirthCertificateForm />",...(I=(v=p.parameters)==null?void 0:v.docs)==null?void 0:I.source}}};const Pt=["Default"];export{p as Default,Pt as __namedExportsOrder,kt as default};
