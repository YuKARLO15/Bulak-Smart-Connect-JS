import{j as t}from"./jsx-runtime-DDq6Xgo1.js";import{r as B}from"./iframe-yBmqwlMP.js";import{C as O}from"./ChildIdentifyingForm-Db6ofRxC.js";import{M as R}from"./MotherIdentifyingForm-u4udRnlV.js";import{F as k}from"./FatherIdentifyingForm-C9RtHSUH.js";import{M as P}from"./MarriageIdentifyingForm-gMA22iGn.js";import{A as T}from"./BirthBackIdentifyingForm-CkRpfE2m.js";import{B as M}from"./Box-BWafXuDY.js";import{T as J}from"./Typography-Ct0PCqr9.js";import{P as L}from"./Paper-Dk3ZGd2g.js";import{B as a}from"./Button-BGhAGg05.js";import{u as _,a as q}from"./chunk-AYJ5UCUI-DzqhQMKT.js";import"./FormControl-B-ULkcsk.js";import"./identifier-CbCYuAvx.js";import"./utils-DoM3o7-Q.js";import"./useFormControl-DEgdcyB7.js";import"./DefaultPropsProvider-9Vu8WoMj.js";import"./isMuiElement-Ryc2mHwy.js";import"./RadioGroup-B0HCSQel.js";import"./FormControlLabel-CfPIDV4m.js";import"./useSlot-Co50lyrG.js";import"./CircularProgress-C5NERrHk.js";import"./createSimplePaletteValueFilter-DSz4oJ5a.js";import"./useControlled-BQwIstgU.js";import"./createSvgIcon-C9-eMRn-.js";import"./createChainedFunction-BO_9K8Jh.js";import"./Grid-Dsu1nkqP.js";import"./useTheme-yYsjI36t.js";import"./useTheme-D20Jv60I.js";import"./TextField-B7XJdpsO.js";import"./OutlinedInput-UJMomlKY.js";import"./isHostComponent-DVu5iVWx.js";import"./Modal-wJu1BkRn.js";import"./utils-412U6jXj.js";import"./index-C4GEXcuS.js";import"./index-C1C1g_aX.js";import"./debounce-Be36O1Ab.js";import"./Menu-B-kB1r8f.js";import"./useSlotProps-B3wqVGg0.js";import"./Grow-CUvc6_ED.js";import"./mergeSlotProps-BG7e0HO0.js";import"./List-DUKeh31J.js";import"./MenuItem-CDdgYxul.js";import"./listItemTextClasses-B9YEE042.js";import"./dividerClasses-DVZH-bWQ.js";import"./Alert-BvomACqZ.js";import"./IconButton-DLjMwxe5.js";const S=()=>{var F;const[s,x]=B.useState(1),[r,g]=B.useState({}),[f,b]=B.useState({}),y=_(),n=((F=q().state)==null?void 0:F.isEditing)||localStorage.getItem("isEditingBirthApplication")==="true";B.useEffect(()=>{if(n)try{console.log("Loading data for editing...");const i=localStorage.getItem("editingApplicationId");console.log("Editing application ID:",i);const o=JSON.parse(localStorage.getItem("applications")||"[]").find(c=>c.id===i);if(o&&o.formData)console.log("Found application to edit:",o),g(o.formData);else{const c=localStorage.getItem("birthCertificateApplication");c?(g(JSON.parse(c)),console.log("Loaded form data from birthCertificateApplication")):console.warn("No application data found for editing")}}catch(i){console.error("Error loading data for editing:",i)}else console.log("Starting with new application - clearing form data"),g({}),localStorage.removeItem("birthCertificateApplication");return()=>{n||localStorage.setItem("birthCertificateApplication",JSON.stringify(r))}},[n]);const m=i=>{const{name:e,value:o,type:c,checked:p}=i.target;g(l=>({...l,[e]:c==="checkbox"?p:o})),Object.keys(r).length>0&&localStorage.setItem("birthCertificateApplication",JSON.stringify({...r,[e]:c==="checkbox"?p:o}))},j={1:["lastName","firstName","birthMonth","birthDay","birthYear","sex","hospital","city","province","barangay","residence","typeOfBirth","birthOrder","birthWeight"],2:["motherLastName","motherFirstName","motherCitizenship","motherReligion","motherTotalChildren","motherLivingChildren","motherDeceasedChildren","motherOccupation","motherAge","motherStreet","motherCity"],3:["fatherLastName","fatherFirstName","fatherCitizenship","fatherReligion","fatherOccupation","fatherAge","fatherStreet","fatherBarangay","fatherCity","fatherProvince","fatherCountry"],4:[],5:[]},w=()=>{var e;const i={};return s===3&&r.notAcknowledgedByFather?!0:((e=j[s])==null||e.forEach(o=>{(!r[o]||r[o].toString().trim()==="")&&(i[o]="This field is required")}),b(i),Object.keys(i).length===0)},u=()=>{w()&&x(i=>i+1)},C=()=>{x(i=>i-1)},D=i=>{i&&i.preventDefault();try{let e;n?(e=localStorage.getItem("editingApplicationId"),console.log("Editing existing application:",e)):(e="BC-"+Date.now().toString().slice(-6),console.log("Creating new application:",e));const o=localStorage.getItem("selectedBirthCertificateOption")||"Regular application",p={id:e,type:"Birth Certificate",applicationType:o,applicationSubtype:(d=>({"Regular application":"Regular Application (0-1 month)","Above 18":"Delayed Registration - Above 18","Below 18":"Delayed Registration - Below 18","Foreign Parent":"Delayed Registration - Foreign Parent","Out of town":"Out of Town Registration","Clerical Error":"Correction - Clerical Errors","Sex DOB":"Correction - Sex/Date of Birth","First Name":"Correction - First Name"})[d]||"Regular Application (0-1 month)")(o),date:new Date().toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric"}),status:n&&localStorage.getItem("currentApplicationStatus")||"Pending",message:`Birth Certificate application for ${r.firstName||""} ${r.lastName||""}`,formData:r,lastUpdated:new Date().toISOString()},l=JSON.parse(localStorage.getItem("applications")||"[]");if(n){const d=l.findIndex(N=>N.id===e);d>=0?(l[d]=p,console.log("Updated existing application at index:",d)):(l.push(p),console.log("Added new application (was editing but not found):",e))}else l.push(p),console.log("Added new application:",e);localStorage.setItem("applications",JSON.stringify(l)),localStorage.setItem("currentApplicationId",e),localStorage.setItem("birthCertificateApplication",JSON.stringify(r)),localStorage.removeItem("isEditingBirthApplication"),localStorage.removeItem("editingApplicationId"),localStorage.removeItem("editingApplication"),window.dispatchEvent(new Event("storage"));const E=new CustomEvent("customStorageUpdate",{detail:{id:e,type:"Birth Certificate",action:n?"updated":"created"}});window.dispatchEvent(E),y(n?"/BirthApplicationSummary":{"Regular application":"/BirthApplicationSummary","Request copy":"/RequestACopyBirthCertificate","Above 18":"/Above18Registration","Below 18":"/Below18Registration","Foreign Parent":"/DelayedOneParentForeignerRegistration","Out of town":"/DelayedOutOfTownRegistration","Clerical Error":"/ClericalErrorApplication","Sex DOB":"/SexDobCorrection","First Name":"/FirstNameCorrection"}[o]||"/BirthApplicationSummary")}catch(e){console.error("Error submitting form:",e),alert("There was a problem submitting your application. Please try again.")}};return t.jsxs(M,{className:"BirthCertificateFormContainer",children:[t.jsx(J,{variant:"h4",className:"BirthCertificateFormTitle",children:"Birth Certificate Application Form"}),t.jsxs(L,{className:"BirthCertificateForm",elevation:3,children:[s===1&&t.jsxs(t.Fragment,{children:[t.jsx(O,{formData:r,handleChange:m,errors:f}),t.jsx(a,{variant:"contained",onClick:u,className:"BirthCertificateFormButton",children:"Next"})]}),s===2&&t.jsxs(t.Fragment,{children:[t.jsx(R,{formData:r,handleChange:m,errors:f}),t.jsx(a,{variant:"contained",onClick:C,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(a,{variant:"contained",onClick:u,className:"BirthCertificateFormButton",children:"Next"})]}),s===3&&t.jsxs(t.Fragment,{children:[t.jsx(k,{formData:r,handleChange:m,errors:f}),t.jsx(a,{variant:"contained",onClick:C,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(a,{variant:"contained",onClick:u,className:"BirthCertificateFormButton",children:"Next"})]}),s===4&&t.jsxs(t.Fragment,{children:[t.jsx(P,{formData:r,handleChange:m,errors:f}),t.jsx(a,{variant:"contained",onClick:C,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(a,{variant:"contained",onClick:u,className:"BirthCertificateFormButton",children:"Next"})]}),s===5&&t.jsxs(t.Fragment,{children:[t.jsx(T,{formData:r,handleChange:m}),t.jsx(a,{variant:"contained",onClick:C,className:"BirthCertificateFormButton",children:"Previous"}),t.jsx(a,{variant:"contained",onClick:D,className:"BirthCertificateFormButton",children:"Submit"})]})]})]})};S.__docgenInfo={description:"",methods:[],displayName:"BirthCertificateForm"};const Mt={title:"Components/BirthCertificateForm",component:S},h=()=>t.jsx(S,{});h.__docgenInfo={description:"",methods:[],displayName:"Default"};var v,A,I;h.parameters={...h.parameters,docs:{...(v=h.parameters)==null?void 0:v.docs,source:{originalSource:"() => <BirthCertificateForm />",...(I=(A=h.parameters)==null?void 0:A.docs)==null?void 0:I.source}}};const Jt=["Default"];export{h as Default,Jt as __namedExportsOrder,Mt as default};
