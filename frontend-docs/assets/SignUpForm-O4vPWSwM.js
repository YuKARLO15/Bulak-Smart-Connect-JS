import{j as s}from"./jsx-runtime-Ds-gkUgj.js";import{r as d}from"./index-CtvPRVHf.js";import{F as b}from"./FullName-DomREuHN.js";import{C as y}from"./ContactInformation-BsP5vkLv.js";import{U as S}from"./UpdateCheckbox-BgZysV8m.js";import{N as P}from"./NavBar-CGkVb6KX.js";import{D as F}from"./DataPrivacy-CePSuH4g.js";/* empty css                   */import{a as q}from"./api-DLOjWVc5.js";import{u as U,L as k}from"./chunk-AYJ5UCUI-CkRdRQ96.js";const x=({formData:e,handleInputChange:c,errors:r,setErrors:i})=>{const u=n=>{const{name:g,value:f}=n.target;c(n),g==="confirmpassword"&&(e.password!==f?i({...r,confirmpassword:"Passwords do not match"}):i({...r,confirmpassword:""}))};return d.useEffect(()=>{e.password===e.confirmpassword&&i(n=>({...n,confirmpassword:""}))},[e.password,e.confirmpassword,i]),s.jsxs("div",{className:"form-group inline",id:"section1",children:[s.jsxs("div",{className:"form-control",id:"username-container",children:[s.jsxs("label",{className:"labels",children:["Username ",s.jsx("span",{className:"asterisk",children:" *"})]}),s.jsx("input",{type:"text",name:"username",placeholder:"Enter your username",value:e.username,onChange:c,required:!0}),s.jsx("span",{className:"error-message",children:r.username})]}),s.jsxs("div",{className:"form-control",id:"password-container",children:[s.jsxs("label",{className:"labels",children:["Password ",s.jsx("span",{className:"asterisk",children:" *"})]}),s.jsx("input",{type:"password",name:"password",placeholder:"•••••••••",value:e.password,onChange:c,required:!0}),s.jsx("span",{className:"error-message",children:r.password})]}),s.jsxs("div",{className:"form-control",id:"password-container",children:[s.jsxs("label",{className:"labels",children:["Confirm Password ",s.jsx("span",{className:"asterisk",children:" *"})," ",s.jsx("span",{className:"error-message-password",children:r.confirmpassword})]}),s.jsx("input",{type:"password",name:"confirmpassword",placeholder:"•••••••••",value:e.confirmpassword,onChange:u,required:!0})]})]})};x.__docgenInfo={description:"",methods:[],displayName:"UsernamePasswordSection"};const L=()=>{const[e,c]=d.useState({username:"",password:"",confirmpassword:"",lastname:"",firstname:"",middlename:"",contact:"",email:"",updates:!1,age:"",hasExtension:!1,extension:""}),[r,i]=d.useState({}),[u,n]=d.useState(!1),[g,f]=d.useState(!1),w=U(),l=o=>{const{name:a,value:m,type:t,checked:h}=o.target;if(a==="contact"){const p=m.replace(/\D/g,"");p.length<=11&&c(v=>({...v,contact:p}))}else c(p=>({...p,[a]:t==="checkbox"?h:m}))},j=o=>{let a={};return o.username||(a.username="Username is required"),o.password||(a.password="Password is required"),o.confirmpassword||(a.confirmpassword="Password is required"),o.password!==o.confirmpassword&&(a.confirmpassword="Passwords do not match"),o.lastname||(a.lastname="Last name is required"),o.firstname||(a.firstname="First name is required"),o.email||(a.email="Email is required"),a},N=async o=>{var m;o.preventDefault(),console.log("Form submitted"),console.log("Form data at submission:",e);const a=j(e);if(console.log("Validation errors:",a),i(a),Object.keys(a).length===0){console.log("Form valid, attempting registration with:",e);try{n(!0),await q.register({email:e.email,password:e.password,name:`${e.firstname} ${e.lastname}`}),n(!1),f(!0),setTimeout(()=>{w("/LogIn")},2e3)}catch(t){if(n(!1),console.log("Error response:",t.response),t.response)if(t.response.status===409)i({...a,email:"This email is already registered"});else{const h=((m=t.response.data)==null?void 0:m.message)||"Registration failed. Please try again.";i({...a,submit:h})}else i({...a,submit:"Registration failed. Please try again."});console.error("Registration error:",t)}}};return s.jsxs("div",{className:"signup-container",children:[s.jsx("div",{className:"Navigation",children:s.jsx(P,{})}),s.jsx("h2",{children:"Signup Form"}),s.jsxs("form",{onSubmit:N,children:[s.jsx(b,{formData:e,handleInputChange:l,errors:r}),s.jsx(x,{formData:e,handleInputChange:l,errors:r,setErrors:i}),s.jsx(y,{formData:e,handleInputChange:l,errors:r}),s.jsx(F,{formData:e,handleInputChange:l}),s.jsx(S,{formData:e,handleInputChange:l}),u&&s.jsx("div",{className:"loading-message",children:"Loading..."}),g&&s.jsx("div",{className:"success-message",children:"Registration successful! Redirecting to login..."}),r.email&&s.jsx("div",{className:"error-message",style:{textAlign:"center",marginBottom:"10px",color:"red"},children:r.email}),r.submit&&s.jsx("div",{className:"error-message",style:{textAlign:"center",marginBottom:"10px",color:"red"},children:r.submit}),s.jsx("button",{type:"submit",className:"btn",children:"Signup"}),s.jsxs("div",{className:"footer",children:["Already have an account? ",s.jsx(k,{to:"/LogIn",children:"Sign in"})]})]})]})};L.__docgenInfo={description:"",methods:[],displayName:"SignUpForm"};export{L as S,x as U};
