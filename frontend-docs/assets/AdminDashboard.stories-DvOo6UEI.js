import{j as a}from"./jsx-runtime-Ds-gkUgj.js";import{r as t}from"./index-CtvPRVHf.js";import{a as Q}from"./api-D_0F9__f.js";import{N as R}from"./NavSide-SprS5l14.js";import{R as B}from"./RecentApplicationsAdmin-DZMoRijS.js";import{R as _}from"./RecentAppointmentsAdmin-_ZGN7IRj.js";import{W as L}from"./WalkInQueueAdmin-qdYiMrL3.js";import{R as x,C as j,X as b,Y as N,T as D,B as v}from"./generateCategoricalChart-BfJI-kMY.js";import{B as V}from"./BarChart-CMimOPyA.js";import{L as T,a as S}from"./LineChart-DgY3dQny.js";import"./AuthContext-DROsejNy.js";import"./createSvgIcon-C90RuxAZ.js";import"./clsx-B-dksMZM.js";import"./DefaultPropsProvider-D010D3ru.js";import"./createTheme-C6kIcmbg.js";import"./Close-BFUA1JaJ.js";import"./Description-VtskB8YN.js";import"./chunk-AYJ5UCUI-CkRdRQ96.js";import"./ApplicationData-DCHunuve.js";import"./Box-DTRDwRT5.js";import"./extendSxProp-DharK51R.js";import"./CircularProgress-3zimLSxM.js";import"./createSimplePaletteValueFilter-5s3yMkVM.js";import"./Typography-B_acdWah.js";import"./Card-5N8AYhSH.js";import"./Paper-DtQYlIIh.js";import"./useTheme-CryYIIKA.js";import"./CardContent-VBZVOkE2.js";import"./List-73TTQkQv.js";import"./ListItem-WXjJjFGO.js";import"./isHostComponent-DVu5iVWx.js";import"./isMuiElement-BCxDYgeU.js";import"./Chip-BZM-6gGf.js";import"./Button-CrXPkcH8.js";import"./RecentAppointmentData-yblrwM7G.js";import"./Divider-CzN18ShR.js";import"./dividerClasses-gi6PS6WE.js";import"./queueService-Krhbga47.js";import"./tiny-invariant-CopsF_GD.js";import"./index-DO8cz205.js";const G=e=>{if(typeof e=="string"&&e.startsWith("WK"))return e;if(!e)return"WK000";const o=e.includes("-")?e.split("-")[1]:e,d=parseInt(o,10)||0;return`WK${String(d).padStart(3,"0")}`},l=()=>{const[e,o]=t.useState([]),[d,I]=t.useState([]),[M,C]=t.useState([]),[P,k]=t.useState([]),[X,p]=t.useState([]),[Y,m]=t.useState(!1),[$,w]=t.useState(null),[W,O]=t.useState(""),[z,F]=t.useState(!1),[h,K]=t.useState(!1),[J,u]=t.useState(!0),[q,f]=t.useState(null),E=r=>{O(r.target.value)},c=t.useCallback(async()=>{u(!0);try{const n=(await Q.get("http://localhost:3000/queues/walk-in")).data.map(s=>({id:s.id,queueNumber:G(s.queueNumber),firstName:s.firstName||"Guest",lastName:s.lastName||"",reasonOfVisit:s.reasonOfVisit||"General Inquiry",status:s.status||"pending",timestamp:s.createdAt||new Date().toISOString()}));p(n),f(null)}catch(r){console.error("Error fetching walk-in queue:",r),f("Could not load queue data"),p([{id:1,queueNumber:"WK001",firstName:"Juan",lastName:"Dela Cruz",reasonOfVisit:"Birth Certificate",status:"pending",timestamp:new Date().toISOString()},{id:2,queueNumber:"WK002",firstName:"Maria",lastName:"Santos",reasonOfVisit:"Marriage Certificate",status:"in-progress",timestamp:new Date().toISOString()},{id:3,queueNumber:"WK003",firstName:"Pedro",lastName:"Reyes",reasonOfVisit:"Death Certificate",status:"pending",timestamp:new Date().toISOString()}])}finally{u(!1)}},[]);return t.useEffect(()=>{c();const r=setInterval(c,3e4);return()=>clearInterval(r)},[c]),t.useEffect(()=>{(async()=>{m(!0);try{const s=await(await fetch("http://localhost:3000/api/dashboard")).json();o(s.walkInData||[]),I(s.certificateData||[]),C(s.applications||[]),k(s.appointments||[]),m(!1)}catch(n){console.error("Error fetching dashboard data:",n),w("Failed to load dashboard data"),m(!1)}})()},[]),a.jsxs("div",{className:`admin-dashboard ${h?"sidebar-open":""}`,children:[a.jsx(R,{isSidebarOpen:h,setIsSidebarOpen:K}),a.jsxs("div",{className:"admin-dashboard-top-nav",children:[a.jsx("h1",{className:"admin-dashboard-title",children:"Dashboard"}),a.jsx("div",{className:"admin-dashboard-search-bar",children:a.jsx("input",{type:"text",placeholder:"Search",value:W,onChange:E})})]}),a.jsx("div",{className:"admin-dashboard-content-wrapper",children:a.jsxs("div",{className:"admin-dashboard-container",children:[a.jsxs("div",{className:"admin-dashboard-main",children:[a.jsxs("div",{className:"admin-dashboard-charts",children:[a.jsxs("div",{className:"admin-dashboard-chart-card",children:[a.jsx("div",{className:"admin-dashboard-chart-header",children:a.jsxs("div",{className:"admin-dashboard-chart-title",children:[a.jsx("span",{className:"admin-dashboard-walk-in-dot"})," Walk In",a.jsx("span",{className:"admin-dashboard-appointment-dot"})," Appointment"]})}),a.jsx(x,{width:"100%",height:200,children:a.jsxs(V,{data:e,children:[a.jsx(j,{strokeDasharray:"3 3"}),a.jsx(b,{dataKey:"name"}),a.jsx(N,{}),a.jsx(D,{}),a.jsx(v,{dataKey:"value",name:"Walk-ins",fill:"#1C4D5A"}),a.jsx(v,{dataKey:"appointments",name:"Appointments",fill:"#8DC3A7"})]})})]}),a.jsxs("div",{className:"admin-dashboard-chart-card",children:[a.jsx("div",{className:"admin-dashboard-chart-header",children:a.jsxs("div",{className:"admin-dashboard-chart-title",children:[a.jsx("span",{className:"admin-dashboard-birth-dot"})," Birth Certificate",a.jsx("span",{className:"admin-dashboard-marriage-dot"})," Marriage Certificate"]})}),a.jsx(x,{width:"100%",height:200,children:a.jsxs(T,{data:d,children:[a.jsx(j,{strokeDasharray:"3 3"}),a.jsx(b,{dataKey:"name"}),a.jsx(N,{}),a.jsx(D,{}),a.jsx(S,{type:"monotone",dataKey:"birth",stroke:"#1C4D5A",activeDot:{r:8}}),a.jsx(S,{type:"monotone",dataKey:"marriage",stroke:"#8DC3A7"})]})})]})]}),a.jsxs("div",{className:"admin-dashboard-section-container",children:[a.jsx("h2",{children:"Document Application"}),a.jsx(B,{}),a.jsx("div",{className:"admin-dashboard-document-applications"})]}),a.jsxs("div",{className:"admin-dashboard-section-container",children:[a.jsx("h2",{children:" Scheduled Appointments"}),a.jsx(_,{}),a.jsx("div",{className:"admin-dashboard-pre-appointments"})]})]}),a.jsx("div",{className:"admin-dashboard-sidebar",children:a.jsxs("div",{className:"admin-dashboard-walk-in-queue",children:[a.jsx("h2",{children:"Walk - In Queue"}),a.jsx(L,{})]})})]})})]})};l.__docgenInfo={description:"",methods:[],displayName:"AdminDashboard"};const _a={title:"Components/AdminDashboard",component:l},i=()=>a.jsx(l,{});i.__docgenInfo={description:"",methods:[],displayName:"Default"};var g,A,y;i.parameters={...i.parameters,docs:{...(g=i.parameters)==null?void 0:g.docs,source:{originalSource:"() => <AdminDashboard />",...(y=(A=i.parameters)==null?void 0:A.docs)==null?void 0:y.source}}};const La=["Default"];export{i as Default,La as __namedExportsOrder,_a as default};
