import{j as e}from"./jsx-runtime-Ds-gkUgj.js";import{r as o}from"./index-CtvPRVHf.js";/* empty css                                */import{H as q}from"./HusbandForm-CNUPX3E1.js";import{W as J}from"./WifeForm-DtUmkLiR.js";import{M as V}from"./MarriageDetailsForm-BZqjZ3lT.js";import{M as G}from"./MarriageAffidavitForm-CES83TzA.js";import{g as K,a as Q}from"./ApplicationData-CtjBMWS1.js";import{B as F}from"./Box-DTRDwRT5.js";import{D as X,a as Z,b as ee}from"./DialogTitle-HlKLS9jm.js";import{D as ae}from"./DialogContentText-CbhOp8yQ.js";import{D as ie}from"./DialogActions-BFTUJfvS.js";import{B as n}from"./Button-CrXPkcH8.js";import{T as B}from"./Typography-B_acdWah.js";import{A as te}from"./Alert-15g-uXn2.js";import{P as re}from"./Paper-DtQYlIIh.js";import{u as oe}from"./chunk-AYJ5UCUI-CkRdRQ96.js";import"./createTheme-C6kIcmbg.js";import"./clsx-B-dksMZM.js";import"./extendSxProp-DharK51R.js";import"./useTheme-CryYIIKA.js";import"./DefaultPropsProvider-D010D3ru.js";import"./useSlot-D5ErQCYq.js";import"./CircularProgress-3zimLSxM.js";import"./createSimplePaletteValueFilter-5s3yMkVM.js";import"./Modal-zfYQbroW.js";import"./createChainedFunction-BO_9K8Jh.js";import"./index-COGUMIcY.js";import"./index-W1kuYZ3C.js";import"./createSvgIcon-C90RuxAZ.js";const y=()=>{const[c,M]=o.useState(1),[r,C]=o.useState({}),[d,N]=o.useState({}),[l,k]=o.useState(""),[m,A]=o.useState(4),[I,W]=o.useState(!1),[se,O]=o.useState(!1),[p,T]=o.useState(null),[$,D]=o.useState(!1),f=oe();o.useEffect(()=>{const a=localStorage.getItem("selectedMarriageOption");a?(k(a),A(a==="Marriage License"?2:4),a==="Marriage Certificate"&&U()):f("/MarriageDashboard")},[f]),o.useEffect(()=>{if(localStorage.getItem("isEditingMarriageForm")==="true"){const i=localStorage.getItem("marriageFormData");if(i)try{const t=JSON.parse(i);C(t),t.husbandCivilStatus==="Widowed"&&setShowHusbandWidowedFields(!0),t.wifeCivilStatus==="Widowed"&&setShowWifeWidowedFields(!0),console.log("Loaded existing marriage form data for editing")}catch(t){console.error("Error loading marriage form data for editing:",t)}localStorage.removeItem("isEditingMarriageForm")}},[]);const U=()=>{try{const a=K("Marriage License");if(a&&a.length>0){a.sort((t,s)=>new Date(s.date)-new Date(t.date));const i=a[0];i.formData&&(O(!0),T(i),D(!0))}}catch(a){console.error("Error checking for previous license data:",a)}},z=()=>{C(p.formData),W(!0),D(!1),console.log("Using data from previous Marriage License:",p.id)},R=()=>{D(!1),console.log("User chose to fill out a new form")},u=a=>{const{name:i,value:t,type:s,checked:h}=a.target;C(w=>({...w,[i]:s==="checkbox"?h:t})),d[i]&&N(w=>({...w,[i]:""}))},_={1:["husbandFirstName","husbandLastName","husbandBirthMonth","husbandBirthDay","husbandBirthYear","husbandBirthCity","husbandBirthProvince","husbandBirthCountry","husbandSex","husbandFatherFirstName","husbandFatherLastName","husbandMotherFirstName","husbandMotherLastName","husbandStreet","husbandCity","husbandProvince","husbandCivilStatus","husbandCountry","husbandReligion","husbandCitizenship","husbandBarangay","husbandFatherCitizenship","husbandMotherCitizenship","waliFirstName","waliLastName","waliRelationship","waliStreet","waliCity","waliProvince","waliCountry","waliBarangay","husbandAge"],2:["wifeFirstName","wifeLastName","wifeBirthMonth","wifeBirthDay","wifeBirthYear","wifeBirthCity","wifeBirthProvince","wifeBirthCountry","wifeSex","wifeFatherFirstName","wifeFatherLastName","wifeMotherFirstName","wifeMotherLastName","wifeStreet","wifeCity","wifeProvince","wifeCivilStatus","wifeCountry","wifeReligion","wifeCitizenship","wifeBarangay","wifeFatherCitizenship","wifeMotherCitizenship","wifewaliFirstName","wifewaliLastName","wifewaliRelationship","wifewaliStreet","wifewaliCity","wifewaliProvince","wifewaliCountry","wifewaliBarangay","wifeAge"],3:["marriageOffice","marriageBarangay","marriageCity","marriageProvince","marriageCountry","marriageMonth","marriageDay","marriageYear","marriageTime"],4:["witness1FirstName","witness1LastName","witness1Address","witness2FirstName","witness2LastName","witness2Address"]},H=()=>{var i;const a={};return(i=_[c])==null||i.forEach(t=>{(!r[t]||r[t].toString().trim()==="")&&(a[t]="This field is required")}),N(a),Object.keys(a).length===0},b=()=>{if(H())c<m?M(a=>a+1):S();else{const a=document.querySelector(`[name="${Object.keys(d)[0]}"]`);a&&a.scrollIntoView({behavior:"smooth",block:"center"})}},v=()=>{M(a=>a-1)},S=a=>{a&&a.preventDefault&&a.preventDefault();try{const i=localStorage.getItem("isEditingMarriageForm")==="true",t=localStorage.getItem("marriageFormData");let s;if(t)try{const x=JSON.parse(t);s=x.id||x.applicationId}catch(x){console.error("Error parsing existing form data:",x)}s||(s=l==="Marriage License"?"ML-"+Date.now().toString().slice(-6):"MC-"+Date.now().toString().slice(-6));const h={...r,applicationId:s,lastUpdated:new Date().toISOString()};localStorage.setItem("marriageFormData",JSON.stringify(h));const Y=new Date().toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric"}),j={id:s,type:l||"Marriage Certificate",applicationType:i?"Modified Application":"New Application",date:Y,status:"Pending",message:`Application for ${l||"marriage"} between ${r.husbandFirstName||""} ${r.husbandLastName||""} and ${r.wifeFirstName||""} ${r.wifeLastName||""}`,formData:{...h},lastModified:i?new Date().toISOString():null};if(console.log(`${i?"Updating":"Creating new"} ${l} application:`,j),!Q(j)){console.error("Failed to add/update application in storage"),alert("There was an error submitting your application. Please try again.");return}localStorage.removeItem("isEditingMarriageForm"),window.dispatchEvent(new Event("storage")),f(l==="Marriage License"?"/MarriageLicenseApplication":"/MarriageCertificateApplication")}catch(i){console.error(`Error submitting ${l} application:`,i),alert("There was an error submitting your application. Please try again.")}};return e.jsxs(F,{className:"MarriageCertificateFormContainer",children:[e.jsxs(X,{open:$,"aria-labelledby":"previous-data-dialog-title","aria-describedby":"previous-data-dialog-description",PaperProps:{sx:{borderRadius:"10px",maxWidth:"500px",width:"100%"}},children:[e.jsx(Z,{id:"previous-data-dialog-title",sx:{backgroundColor:"#184a5b",color:"white",fontWeight:600},children:"Use Previous Marriage License Data?"}),e.jsx(ee,{sx:{padding:"24px"},children:e.jsxs(ae,{id:"previous-data-dialog-description",sx:{color:"#333333",fontSize:"16px",marginBottom:"10",marginTop:"30px"},children:["We found a previous Marriage License application submitted on ",p&&new Date(p.date).toLocaleDateString(),". Would you like to use that information to fill out this form?"]})}),e.jsxs(ie,{sx:{padding:"16px 24px",justifyContent:"space-between"},children:[e.jsx(n,{onClick:R,sx:{backgroundColor:"#e0e0e0",color:"#333333",padding:"4px 10px",fontWeight:500},children:"No, I'll fill it out again"}),e.jsx(n,{onClick:z,autoFocus:!0,sx:{backgroundColor:"#184a5b",color:"white",padding:"4px 10px",fontWeight:500},children:"Yes, use my previous information"})]})]}),e.jsxs(B,{variant:"h4",className:"MarriageCertificateFormTitle",children:[l||"Marriage"," Application Form"]}),I&&e.jsx(te,{severity:"info",sx:{mb:2},children:"Using data from your previous Marriage License application. Please verify all information is still correct."}),e.jsxs(re,{className:"MarriageCertificateForm",elevation:3,children:[c===1&&e.jsxs(e.Fragment,{children:[e.jsx(q,{formData:r,handleChange:u,errors:d}),e.jsx(n,{variant:"contained",onClick:b,className:"MarriageCertificateFormButton",children:"Next"})]}),c===2&&e.jsxs(e.Fragment,{children:[e.jsx(J,{formData:r,handleChange:u,errors:d}),e.jsx(n,{variant:"contained",onClick:v,className:"MarriageCertificateFormButton",children:"Previous"}),e.jsx(n,{variant:"contained",onClick:m===2?S:b,className:"MarriageCertificateFormButton",children:m===2?"Submit":"Next"})]}),c===3&&m>2&&e.jsxs(e.Fragment,{children:[e.jsx(V,{formData:r,handleChange:u,errors:d}),e.jsx(n,{variant:"contained",onClick:v,className:"MarriageCertificateFormButton",children:"Previous"}),e.jsx(n,{variant:"contained",onClick:b,className:"MarriageCertificateFormButton",children:"Next"})]}),c===4&&m>2&&e.jsxs(e.Fragment,{children:[e.jsx(G,{formData:r,handleChange:u,errors:d}),e.jsx(n,{variant:"contained",onClick:v,className:"MarriageCertificateFormButton",children:"Previous"}),e.jsx(n,{variant:"contained",onClick:S,className:"MarriageCertificateFormButton",children:"Submit"})]}),e.jsxs(F,{className:"FormProgressContainer",children:[e.jsxs(B,{variant:"body2",children:["Step ",c," of ",m]}),e.jsx(F,{className:"FormProgressBar",children:e.jsx(F,{className:"FormProgressFill",sx:{width:`${c/m*100}%`}})})]})]})]})};y.__docgenInfo={description:"",methods:[],displayName:"MarriageCertificateForm"};const Te={title:"Components/MarriageCertificateForm",component:y},g=()=>e.jsx(y,{});g.__docgenInfo={description:"",methods:[],displayName:"Default"};var P,L,E;g.parameters={...g.parameters,docs:{...(P=g.parameters)==null?void 0:P.docs,source:{originalSource:"() => <MarriageCertificateForm />",...(E=(L=g.parameters)==null?void 0:L.docs)==null?void 0:E.source}}};const $e=["Default"];export{g as Default,$e as __namedExportsOrder,Te as default};
