import{j as e}from"./jsx-runtime-Ds-gkUgj.js";import{r as a}from"./index-CtvPRVHf.js";import{N as O}from"./NavSide-D1Zl4aGG.js";import{q as w}from"./queueService-DplCnGrt.js";import{u as V}from"./chunk-AYJ5UCUI-CkRdRQ96.js";import"./createSvgIcon-Bysyal0j.js";import"./clsx-B-dksMZM.js";import"./DefaultPropsProvider-BmwwqBPg.js";import"./createTheme-CEEQiKg8.js";import"./AuthContext-DROsejNy.js";import"./index-xsH4HHeE.js";const _=s=>{if(typeof s=="string"&&s.startsWith("WK"))return s;const d=s!=null&&s.includes("-")?s.split("-")[1]:s,m=parseInt(d,10)||0;return`WK${String(m).padStart(3,"0")}`},p=()=>{V();const[s,d]=a.useState({lastName:"",firstName:"",middleInitial:"",address:"",phoneNumber:"",reasonOfVisit:""}),[m,S]=a.useState(!1),[A,F]=a.useState(""),[k,W]=a.useState(!0),[f,y]=a.useState(!1),[B,b]=a.useState(!1),[t,D]=a.useState(null);a.useEffect(()=>{D({lastName:"Francisco",firstName:"John",middleInitial:"D",address:"123 Pinaod San Ildefonso, Bulacan",phoneNumber:"09123456789"})},[]),a.useEffect(()=>{f&&t&&d({...s,lastName:t.lastName,firstName:t.firstName,middleInitial:t.middleInitial,address:t.address,phoneNumber:t.phoneNumber})},[f,t]);const n=r=>{const{name:o,value:i}=r.target;d({...s,[o]:i})},N=r=>{y(r),W(!1),b(!0),F(r?"self":"other")},C=async r=>{r.preventDefault();try{const o=JSON.parse(localStorage.getItem("currentUser"))||{},i=o.id||o.email||"guest",x=await w.createQueue({firstName:s.firstName,lastName:s.lastName,middleInitial:s.middleInitial||"",address:s.address||"",phoneNumber:s.phoneNumber||"",reasonOfVisit:s.reasonOfVisit,appointmentType:s.reasonOfVisit}),I=_(x.queue.queueNumber),c={id:I,dbId:x.queue.id,queueNumber:I,date:new Date().toLocaleDateString("en-US",{month:"2-digit",day:"2-digit",year:"2-digit"}),userData:s,appointmentType:s.reasonOfVisit,isUserQueue:!0,userId:i};localStorage.setItem(`userQueue_${i}`,JSON.stringify(c));try{const u=localStorage.getItem(`userQueues_${i}`);let h=u?JSON.parse(u):[];Array.isArray(h)||(h=[]),h.push(c),localStorage.setItem(`userQueues_${i}`,JSON.stringify(h)),localStorage.setItem("userQueue",JSON.stringify(c))}catch(u){console.error("Error updating user queues:",u),localStorage.setItem(`userQueues_${i}`,JSON.stringify([c]))}window.location.href="/WalkInDetails"}catch(o){console.error("Error creating queue:",o)}};return k?e.jsx("div",{className:"WalkInFormContainerWalkIn",children:e.jsx("div",{className:"DialogOverlay",children:e.jsxs("div",{className:"DialogBox",children:[e.jsx("h3",{children:"Account Verification"}),e.jsx("p",{children:"Are you the owner of this account?"}),e.jsxs("div",{className:"DialogActions",children:[e.jsx("button",{className:"DialogBtn YesBtn",onClick:()=>N(!0),children:"Yes, use my details"}),e.jsx("button",{className:"DialogBtn NoBtn",onClick:()=>N(!1),children:"No, enter new details"})]})]})})}):e.jsxs("div",{className:`WalkInFormContainerWalkIn ${m?"sidebar-open":""}`,children:[e.jsx(O,{isSidebarOpen:m,setIsSidebarOpen:S}),e.jsx("div",{className:"FormHeaderWalkIn",children:e.jsx("h1",{children:"Walk - In"})}),e.jsxs("div",{className:"FormTitleWalkIn",children:[e.jsx("h2",{children:"Walk-In Form"}),e.jsx("p",{children:"Please fill in the details below:"})]}),e.jsx("div",{className:"WalkInForm",children:e.jsxs("form",{onSubmit:C,children:[e.jsxs("div",{className:"FormRowWalkIn",children:[e.jsxs("div",{className:"FormGroupWalkIn",children:[e.jsx("label",{htmlFor:"lastName",children:"Last Name"}),e.jsx("input",{type:"text",id:"lastName",name:"lastName",value:s.lastName,onChange:n,required:!0})]}),e.jsxs("div",{className:"FormGroupWalkIn",children:[e.jsx("label",{htmlFor:"firstName",children:"First Name"}),e.jsx("input",{type:"text",id:"firstName",name:"firstName",value:s.firstName,onChange:n,required:!0})]}),e.jsxs("div",{className:"FormGroupWalkIn SmallWalkIn",children:[e.jsx("label",{htmlFor:"middleInitial",children:"Middle Initial"}),e.jsx("input",{type:"text",id:"middleInitial",name:"middleInitial",maxLength:"1",value:s.middleInitial,onChange:n})]})]}),e.jsxs("div",{className:"FormRowWalkIn",children:[e.jsxs("div",{className:"FormGroupWalkIn",children:[e.jsx("label",{htmlFor:"address",children:"Address"}),e.jsx("input",{type:"text",id:"address",name:"address",value:s.address,onChange:n,required:!0})]}),e.jsxs("div",{className:"FormGroupWalkIn",children:[e.jsx("label",{htmlFor:"phoneNumber",children:"Phone Number"}),e.jsx("input",{type:"tel",id:"phoneNumber",name:"phoneNumber",value:s.phoneNumber,onChange:n,required:!0})]})]}),e.jsx("div",{className:"FormRowWalkIn",children:e.jsxs("div",{className:"FormGroupWalkIn",children:[e.jsx("label",{htmlFor:"reasonOfVisit",children:"Reason of Visit"}),e.jsxs("select",{id:"reasonOfVisit",name:"reasonOfVisit",value:s.reasonOfVisit,onChange:n,required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select reason"}),e.jsx("option",{value:"Birth Certificate",children:"Birth Certificate"}),e.jsx("option",{value:"Marriage Certificate",children:"Marriage Certificate"}),e.jsx("option",{value:"Death Certificate",children:"Death Certificate"}),e.jsx("option",{value:"Inqury",children:"Inqury"})]})]})}),e.jsx("div",{className:"FormActionsWalkIn",children:e.jsx("button",{type:"submit",className:"ConfirmBtnWalkIn",children:"Confirm"})})]})})]})};p.__docgenInfo={description:"",methods:[],displayName:"WalkInForm"};const L={title:"Components/WalkInForm",component:p},l=()=>e.jsx(p,{});l.__docgenInfo={description:"",methods:[],displayName:"Default"};var g,j,v;l.parameters={...l.parameters,docs:{...(g=l.parameters)==null?void 0:g.docs,source:{originalSource:"() => <WalkInForm />",...(v=(j=l.parameters)==null?void 0:j.docs)==null?void 0:v.source}}};const M=["Default"];export{l as Default,M as __namedExportsOrder,L as default};
