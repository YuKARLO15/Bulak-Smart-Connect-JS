import{r as s}from"./iframe-4fZ_cwy9.js";import{c as ct}from"./clsx-B-dksMZM.js";import{j as A}from"./jsx-runtime-BRC6Lz_j.js";import{s as V,u as ut,c as ft,r as Rt}from"./DefaultPropsProvider-DaAi9QNZ.js";import{b as dt,g as mt}from"./identifier-Bwol88jg.js";import{r as Ct,m as Et,a as kt,u as G}from"./useSlot-DD4M3QKk.js";import{a as ht,b as Tt}from"./CircularProgress-DdzRYLKA.js";import{i as Dt}from"./isHostComponent-DVu5iVWx.js";import{P as Ft}from"./Paper-DufhRzY5.js";import{o as Q}from"./utils-D1pFObUt.js";import{g as Lt,o as Z,M as It}from"./Modal-CBPQa4KO.js";import{d as Ot}from"./debounce-Be36O1Ab.js";import{G as Kt}from"./Grow-B7oVTJ3B.js";import{m as zt}from"./mergeSlotProps-By6iUkp4.js";import{L as Ht}from"./List-ktm0QoE4.js";function jt(e){var k;const{elementType:t,externalSlotProps:o,ownerState:S,skipResolvingSlotProps:y=!1,...h}=e,f=y?{}:Ct(o,S),{props:d,internalRef:m}=Et({...h,externalSlotProps:f}),M=ht(m,f==null?void 0:f.ref,(k=e.additionalProps)==null?void 0:k.ref);return kt(t,{...d,ref:M},S)}const Nt=s.createContext(),At=()=>s.useContext(Nt)??!1;function q(e,t,o){return e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:o?null:e.firstChild}function it(e,t,o){return e===t?o?e.firstChild:e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:o?null:e.lastChild}function Pt(e,t){if(t===void 0)return!0;let o=e.innerText;return o===void 0&&(o=e.textContent),o=o.trim().toLowerCase(),o.length===0?!1:t.repeating?o[0]===t.keys[0]:o.startsWith(t.keys.join(""))}function $(e,t,o,S,y,h){let f=!1,d=y(e,t,t?o:!1);for(;d;){if(d===e.firstChild){if(f)return!1;f=!0}const m=S?!1:d.disabled||d.getAttribute("aria-disabled")==="true";if(!d.hasAttribute("tabindex")||!Pt(d,h)||m)d=y(e,d,o);else return d.focus(),!0}return!1}const Wt=s.forwardRef(function(t,o){const{actions:S,autoFocus:y=!1,autoFocusItem:h=!1,children:f,className:d,disabledItemsFocusable:m=!1,disableListWrap:M=!1,onKeyDown:E,variant:k="selectedMenu",...z}=t,l=s.useRef(null),v=s.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Tt(()=>{y&&l.current.focus()},[y]),s.useImperativeHandle(S,()=>({adjustStyleForScrollbar:(r,{direction:a})=>{const p=!l.current.style.width;if(r.clientHeight<l.current.clientHeight&&p){const x=`${Lt(Z(r))}px`;l.current.style[a==="rtl"?"paddingLeft":"paddingRight"]=x,l.current.style.width=`calc(100% + ${x})`}return l.current}}),[]);const H=r=>{const a=l.current,p=r.key;if(r.ctrlKey||r.metaKey||r.altKey){E&&E(r);return}const D=Q(a).activeElement;if(p==="ArrowDown")r.preventDefault(),$(a,D,M,m,q);else if(p==="ArrowUp")r.preventDefault(),$(a,D,M,m,it);else if(p==="Home")r.preventDefault(),$(a,null,M,m,q);else if(p==="End")r.preventDefault(),$(a,null,M,m,it);else if(p.length===1){const c=v.current,T=p.toLowerCase(),K=performance.now();c.keys.length>0&&(K-c.lastTime>500?(c.keys=[],c.repeating=!0,c.previousKeyMatched=!0):c.repeating&&T!==c.keys[0]&&(c.repeating=!1)),c.lastTime=K,c.keys.push(T);const F=D&&!c.repeating&&Pt(D,c);c.previousKeyMatched&&(F||$(a,D,!1,m,q,c))?r.preventDefault():c.previousKeyMatched=!1}E&&E(r)},L=ht(l,o);let i=-1;s.Children.forEach(f,(r,a)=>{if(!s.isValidElement(r)){i===a&&(i+=1,i>=f.length&&(i=-1));return}r.props.disabled||(k==="selectedMenu"&&r.props.selected||i===-1)&&(i=a),i===a&&(r.props.disabled||r.props.muiSkipListHighlight||r.type.muiSkipListHighlight)&&(i+=1,i>=f.length&&(i=-1))});const w=s.Children.map(f,(r,a)=>{if(a===i){const p={};return h&&(p.autoFocus=!0),r.props.tabIndex===void 0&&k==="selectedMenu"&&(p.tabIndex=0),s.cloneElement(r,p)}return r});return A.jsx(Ht,{role:"menu",ref:L,className:d,onKeyDown:H,tabIndex:y?0:-1,...z,children:w})});function Ut(e){return dt("MuiPopover",e)}mt("MuiPopover",["root","paper"]);function lt(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.height/2:t==="bottom"&&(o=e.height),o}function at(e,t){let o=0;return typeof t=="number"?o=t:t==="center"?o=e.width/2:t==="right"&&(o=e.width),o}function pt(e){return[e.horizontal,e.vertical].map(t=>typeof t=="number"?`${t}px`:t).join(" ")}function J(e){return typeof e=="function"?e():e}const $t=e=>{const{classes:t}=e;return ft({root:["root"],paper:["paper"]},Ut,t)},Gt=V(It,{name:"MuiPopover",slot:"Root",overridesResolver:(e,t)=>t.root})({}),gt=V(Ft,{name:"MuiPopover",slot:"Paper",overridesResolver:(e,t)=>t.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Vt=s.forwardRef(function(t,o){const S=ut({props:t,name:"MuiPopover"}),{action:y,anchorEl:h,anchorOrigin:f={vertical:"top",horizontal:"left"},anchorPosition:d,anchorReference:m="anchorEl",children:M,className:E,container:k,elevation:z=8,marginThreshold:l=16,open:v,PaperProps:H={},slots:L={},slotProps:i={},transformOrigin:w={vertical:"top",horizontal:"left"},TransitionComponent:r,transitionDuration:a="auto",TransitionProps:p={},disableScrollLock:x=!1,...D}=S,c=s.useRef(),T={...S,anchorOrigin:f,anchorReference:m,elevation:z,marginThreshold:l,transformOrigin:w,TransitionComponent:r,transitionDuration:a,TransitionProps:p},K=$t(T),F=s.useCallback(()=>{if(m==="anchorPosition")return d;const n=J(h),P=(n&&n.nodeType===1?n:Q(c.current).body).getBoundingClientRect();return{top:P.top+lt(P,f.vertical),left:P.left+at(P,f.horizontal)}},[h,f.horizontal,f.vertical,d,m]),I=s.useCallback(n=>({vertical:lt(n,w.vertical),horizontal:at(n,w.horizontal)}),[w.horizontal,w.vertical]),_=s.useCallback(n=>{const g={width:n.offsetWidth,height:n.offsetHeight},P=I(g);if(m==="none")return{top:null,left:null,transformOrigin:pt(P)};const U=F();let j=U.top-P.vertical,N=U.left-P.horizontal;const et=j+g.height,ot=N+g.width,rt=Z(J(h)),nt=rt.innerHeight-l,st=rt.innerWidth-l;if(l!==null&&j<l){const C=j-l;j-=C,P.vertical+=C}else if(l!==null&&et>nt){const C=et-nt;j-=C,P.vertical+=C}if(l!==null&&N<l){const C=N-l;N-=C,P.horizontal+=C}else if(ot>st){const C=ot-st;N-=C,P.horizontal+=C}return{top:`${Math.round(j)}px`,left:`${Math.round(N)}px`,transformOrigin:pt(P)}},[h,m,F,I,l]),[X,B]=s.useState(v),R=s.useCallback(()=>{const n=c.current;if(!n)return;const g=_(n);g.top!==null&&n.style.setProperty("top",g.top),g.left!==null&&(n.style.left=g.left),n.style.transformOrigin=g.transformOrigin,B(!0)},[_]);s.useEffect(()=>(x&&window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)),[h,x,R]);const Y=()=>{R()},O=()=>{B(!1)};s.useEffect(()=>{v&&R()}),s.useImperativeHandle(y,()=>v?{updatePosition:()=>{R()}}:null,[v,R]),s.useEffect(()=>{if(!v)return;const n=Ot(()=>{R()}),g=Z(h);return g.addEventListener("resize",n),()=>{n.clear(),g.removeEventListener("resize",n)}},[h,v,R]);let u=a;const b={slots:{transition:r,...L},slotProps:{transition:p,paper:H,...i}},[W,yt]=G("transition",{elementType:Kt,externalForwardedProps:b,ownerState:T,getSlotProps:n=>({...n,onEntering:(g,P)=>{var U;(U=n.onEntering)==null||U.call(n,g,P),Y()},onExited:g=>{var P;(P=n.onExited)==null||P.call(n,g),O()}}),additionalProps:{appear:!0,in:v}});a==="auto"&&!W.muiSupportAuto&&(u=void 0);const vt=k||(h?Q(J(h)).body:void 0),[tt,{slots:bt,slotProps:wt,...St}]=G("root",{ref:o,elementType:Gt,externalForwardedProps:{...b,...D},shouldForwardComponentProp:!0,additionalProps:{slots:{backdrop:L.backdrop},slotProps:{backdrop:zt(typeof i.backdrop=="function"?i.backdrop(T):i.backdrop,{invisible:!0})},container:vt,open:v},ownerState:T,className:ct(K.root,E)}),[Mt,xt]=G("paper",{ref:c,className:K.paper,elementType:gt,externalForwardedProps:b,shouldForwardComponentProp:!0,additionalProps:{elevation:z,style:X?void 0:{opacity:0}},ownerState:T});return A.jsx(tt,{...St,...!Dt(tt)&&{slots:bt,slotProps:wt,disableScrollLock:x},children:A.jsx(W,{...yt,timeout:u,children:A.jsx(Mt,{...xt,children:M})})})});function _t(e){return dt("MuiMenu",e)}mt("MuiMenu",["root","paper","list"]);const Bt={vertical:"top",horizontal:"right"},Xt={vertical:"top",horizontal:"left"},Yt=e=>{const{classes:t}=e;return ft({root:["root"],paper:["paper"],list:["list"]},_t,t)},qt=V(Vt,{shouldForwardProp:e=>Rt(e)||e==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(e,t)=>t.root})({}),Jt=V(gt,{name:"MuiMenu",slot:"Paper",overridesResolver:(e,t)=>t.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Qt=V(Wt,{name:"MuiMenu",slot:"List",overridesResolver:(e,t)=>t.list})({outline:0}),me=s.forwardRef(function(t,o){const S=ut({props:t,name:"MuiMenu"}),{autoFocus:y=!0,children:h,className:f,disableAutoFocusItem:d=!1,MenuListProps:m={},onClose:M,open:E,PaperProps:k={},PopoverClasses:z,transitionDuration:l="auto",TransitionProps:{onEntering:v,...H}={},variant:L="selectedMenu",slots:i={},slotProps:w={},...r}=S,a=At(),p={...S,autoFocus:y,disableAutoFocusItem:d,MenuListProps:m,onEntering:v,PaperProps:k,transitionDuration:l,TransitionProps:H,variant:L},x=Yt(p),D=y&&!d&&E,c=s.useRef(null),T=(u,b)=>{c.current&&c.current.adjustStyleForScrollbar(u,{direction:a?"rtl":"ltr"}),v&&v(u,b)},K=u=>{u.key==="Tab"&&(u.preventDefault(),M&&M(u,"tabKeyDown"))};let F=-1;s.Children.map(h,(u,b)=>{s.isValidElement(u)&&(u.props.disabled||(L==="selectedMenu"&&u.props.selected||F===-1)&&(F=b))});const I={slots:i,slotProps:{list:m,transition:H,paper:k,...w}},_=jt({elementType:i.root,externalSlotProps:w.root,ownerState:p,className:[x.root,f]}),[X,B]=G("paper",{className:x.paper,elementType:Jt,externalForwardedProps:I,shouldForwardComponentProp:!0,ownerState:p}),[R,Y]=G("list",{className:ct(x.list,m.className),elementType:Qt,shouldForwardComponentProp:!0,externalForwardedProps:I,getSlotProps:u=>({...u,onKeyDown:b=>{var W;K(b),(W=u.onKeyDown)==null||W.call(u,b)}}),ownerState:p}),O=typeof I.slotProps.transition=="function"?I.slotProps.transition(p):I.slotProps.transition;return A.jsx(qt,{onClose:M,anchorOrigin:{vertical:"bottom",horizontal:a?"right":"left"},transformOrigin:a?Bt:Xt,slots:{root:i.root,paper:X,backdrop:i.backdrop,...i.transition&&{transition:i.transition}},slotProps:{root:_,paper:B,backdrop:typeof w.backdrop=="function"?w.backdrop(p):w.backdrop,transition:{...O,onEntering:(...u)=>{var b;T(...u),(b=O==null?void 0:O.onEntering)==null||b.call(O,...u)}}},open:E,ref:o,transitionDuration:l,ownerState:p,...r,classes:z,children:A.jsx(R,{actions:c,autoFocus:y&&(F===-1||d),autoFocusItem:D,variant:L,...Y,children:h})})});export{me as M};
