import{j as e}from"./jsx-runtime-Ds-gkUgj.js";import{r as d}from"./index-CtvPRVHf.js";import{F as b}from"./FullName-DomREuHN.js";import{C as S}from"./ContactInformation-BsP5vkLv.js";import{U as y}from"./UpdateCheckbox-BgZysV8m.js";import{N as P}from"./NavBar-DRpGJZHc.js";import{D as E}from"./DataPrivacy-CePSuH4g.js";/* empty css                   */import{a as F}from"./api-DLOjWVc5.js";import{u as U,L as q}from"./chunk-AYJ5UCUI-CkRdRQ96.js";const h=({formData:s,handleInputChange:l,errors:n,setErrors:i})=>{const u=o=>{const{name:g,value:f}=o.target;l(o),g==="confirmpassword"&&(s.password!==f?i({...n,confirmpassword:"Passwords do not match"}):i({...n,confirmpassword:""}))};return d.useEffect(()=>{s.password===s.confirmpassword&&i(o=>({...o,confirmpassword:""}))},[s.password,s.confirmpassword,i]),e.jsxs("div",{className:"form-group inline",id:"section1",children:[e.jsxs("div",{className:"form-control",id:"username-container",children:[e.jsxs("label",{className:"labels",children:["Username ",e.jsx("span",{className:"asterisk",children:" *"})]}),e.jsx("input",{type:"text",name:"username",placeholder:"Enter your username",value:s.username,onChange:l,required:!0}),e.jsx("span",{className:"error-message",children:n.username})]}),e.jsxs("div",{className:"form-control",id:"password-container",children:[e.jsxs("label",{className:"labels",children:["Password ",e.jsx("span",{className:"asterisk",children:" *"})]}),e.jsx("input",{type:"password",name:"password",placeholder:"•••••••••",value:s.password,onChange:l,required:!0}),e.jsx("span",{className:"error-message",children:n.password})]}),e.jsxs("div",{className:"form-control",id:"password-container",children:[e.jsxs("label",{className:"labels",children:["Confirm Password ",e.jsx("span",{className:"asterisk",children:" *"})," ",e.jsx("span",{className:"error-message-password",children:n.confirmpassword})]}),e.jsx("input",{type:"password",name:"confirmpassword",placeholder:"•••••••••",value:s.confirmpassword,onChange:u,required:!0})]})]})};h.__docgenInfo={description:"",methods:[],displayName:"UsernamePasswordSection"};const k=()=>{const[s,l]=d.useState({username:"",password:"",confirmpassword:"",lastname:"",firstname:"",middlename:"",contact:"",email:"",updates:!1,age:"",hasExtension:!1,extension:""}),[n,i]=d.useState({}),[u,o]=d.useState(!1),[g,f]=d.useState(!1),w=U(),m=r=>{const{name:a,value:c,type:t,checked:x}=r.target;if(a==="contact"){const p=c.replace(/\D/g,"");p.length<=11&&l(v=>({...v,contact:p}))}else l(p=>({...p,[a]:t==="checkbox"?x:c}))},j=r=>{let a={};return r.username?r.username.length<4&&(a.username="Username must be at least 4 characters"):a.username="Username is required",r.email?/\S+@\S+\.\S+/.test(r.email)||(a.email="Email is invalid"):a.email="Email is required",r.password||(a.password="Password is required"),r.confirmpassword||(a.confirmpassword="Password is required"),r.password!==r.confirmpassword&&(a.confirmpassword="Passwords do not match"),r.lastname||(a.lastname="Last name is required"),r.firstname||(a.firstname="First name is required"),a},N=async r=>{var c;r.preventDefault(),console.log("Form submitted"),console.log("Form data at submission:",s);const a=j(s);if(console.log("Validation errors:",a),i(a),Object.keys(a).length===0){console.log("Form valid, attempting registration with:",s);try{o(!0),await F.register({username:s.username,email:s.email,password:s.password,firstName:s.firstname,lastName:s.lastname,...s.middlename&&{middleName:s.middlename},...s.hasExtension&&s.extension&&{nameExtension:s.extension},contactNumber:s.contact,name:`${s.firstname} ${s.middlename?s.middlename+" ":""}${s.lastname}${s.hasExtension&&s.extension?" "+s.extension:""}`}),o(!1),f(!0),setTimeout(()=>{w("/LogIn")},2e3)}catch(t){if(o(!1),console.log("Error response:",t.response),t.response)if(t.response.status===409)i({...a,email:"This email is already registered"});else{const x=((c=t.response.data)==null?void 0:c.message)||"Registration failed. Please try again.";i({...a,submit:x})}else i({...a,submit:"Registration failed. Please try again."});console.error("Registration error:",t)}}};return e.jsxs("div",{className:"signup-container",children:[e.jsx("div",{className:"Navigation",children:e.jsx(P,{})}),e.jsx("h2",{children:"Signup Form"}),e.jsxs("form",{onSubmit:N,children:[e.jsx(b,{formData:s,handleInputChange:m,errors:n}),e.jsx(h,{formData:s,handleInputChange:m,errors:n,setErrors:i}),e.jsx(S,{formData:s,handleInputChange:m,errors:n}),e.jsx(E,{formData:s,handleInputChange:m}),e.jsx(y,{formData:s,handleInputChange:m}),u&&e.jsx("div",{className:"loading-message",children:"Loading..."}),g&&e.jsx("div",{className:"success-message",children:"Registration successful! Redirecting to login..."}),n.email&&e.jsx("div",{className:"error-message",style:{textAlign:"center",marginBottom:"10px",color:"red"},children:n.email}),n.submit&&e.jsx("div",{className:"error-message",style:{textAlign:"center",marginBottom:"10px",color:"red"},children:n.submit}),e.jsx("button",{type:"submit",className:"btn",children:"Signup"}),e.jsxs("div",{className:"footer",children:["Already have an account? ",e.jsx(q,{to:"/LogIn",children:"Sign in"})]})]})]})};k.__docgenInfo={description:"",methods:[],displayName:"SignUpForm"};export{k as S,h as U};
