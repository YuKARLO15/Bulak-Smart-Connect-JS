import{j as e}from"./jsx-runtime-Ds-gkUgj.js";import{r}from"./index-CtvPRVHf.js";/* empty css                                */import{H as _}from"./HusbandForm-CNUPX3E1.js";import{W as Y}from"./WifeForm-DtUmkLiR.js";import{M as q}from"./MarriageDetailsForm-BZqjZ3lT.js";import{M as H}from"./MarriageAffidavitForm-CES83TzA.js";import{a as J,b as V}from"./ApplicationData-ZvYeRaMT.js";import{B as x}from"./Box-CiLytvgs.js";import{D as G,a as K,b as Q,c as X}from"./DialogTitle-BDIeRGVF.js";import{D as Z}from"./DialogContentText-CeJYwO3l.js";import{B as s}from"./Button-DiC-o-A5.js";import{T as S}from"./Typography-bP-jEqOD.js";import{A as ee}from"./Alert-DwyBMc6h.js";import{P as ae}from"./Paper-CUixK3Wn.js";import{u as ie}from"./chunk-AYJ5UCUI-CkRdRQ96.js";import"./createTheme-CEEQiKg8.js";import"./clsx-B-dksMZM.js";import"./extendSxProp-mB04pl9k.js";import"./useTheme-BaXXVSuK.js";import"./DefaultPropsProvider-BmwwqBPg.js";import"./useSlot-C9vuPqXJ.js";import"./CircularProgress-CxdDrrre.js";import"./createSimplePaletteValueFilter-Bxcyfoq9.js";import"./Modal-D7YpB11p.js";import"./createChainedFunction-BO_9K8Jh.js";import"./index-COGUMIcY.js";import"./index-W1kuYZ3C.js";import"./createSvgIcon-Bysyal0j.js";const v=()=>{const[o,D]=r.useState(1),[t,N]=r.useState({}),[m,M]=r.useState({}),[c,L]=r.useState(""),[l,k]=r.useState(4),[A,E]=r.useState(!1),[te,T]=r.useState(!1),[u,$]=r.useState(null),[O,C]=r.useState(!1),h=ie();r.useEffect(()=>{const a=localStorage.getItem("selectedMarriageOption");a?(L(a),k(a==="Marriage License"?2:4),a==="Marriage Certificate"&&W()):h("/MarriageDashboard")},[h]);const W=()=>{try{const a=J("Marriage License");if(a&&a.length>0){a.sort((n,d)=>new Date(d.date)-new Date(n.date));const i=a[0];i.formData&&(T(!0),$(i),C(!0))}}catch(a){console.error("Error checking for previous license data:",a)}},z=()=>{N(u.formData),E(!0),C(!1),console.log("Using data from previous Marriage License:",u.id)},I=()=>{C(!1),console.log("User chose to fill out a new form")},f=a=>{const{name:i,value:n,type:d,checked:g}=a.target;N(w=>({...w,[i]:d==="checkbox"?g:n})),m[i]&&M(w=>({...w,[i]:""}))},R={1:["husbandFirstName","husbandLastName","husbandBirthMonth","husbandBirthDay","husbandBirthYear","husbandBirthCity","husbandBirthProvince","husbandBirthCountry","husbandSex","husbandFatherFirstName","husbandFatherLastName","husbandMotherFirstName","husbandMotherLastName","husbandStreet","husbandCity","husbandProvince","husbandCivilStatus","husbandCountry","husbandReligion","husbandCitizenship","husbandBarangay","husbandFatherCitizenship","husbandMotherCitizenship","waliFirstName","waliLastName","waliRelationship","waliStreet","waliCity","waliProvince","waliCountry","waliBarangay","husbandAge"],2:["wifeFirstName","wifeLastName","wifeBirthMonth","wifeBirthDay","wifeBirthYear","wifeBirthCity","wifeBirthProvince","wifeBirthCountry","wifeSex","wifeFatherFirstName","wifeFatherLastName","wifeMotherFirstName","wifeMotherLastName","wifeStreet","wifeCity","wifeProvince","wifeCivilStatus","wifeCountry","wifeReligion","wifeCitizenship","wifeBarangay","wifeFatherCitizenship","wifeMotherCitizenship","wifewaliFirstName","wifewaliLastName","wifewaliRelationship","wifewaliStreet","wifewaliCity","wifewaliProvince","wifewaliCountry","wifewaliBarangay","wifeAge"],3:["marriageOffice","marriageBarangay","marriageCity","marriageProvince","marriageCountry","marriageMonth","marriageDay","marriageYear","marriageTime"],4:["witness1FirstName","witness1LastName","witness1Address","witness2FirstName","witness2LastName","witness2Address"]},U=()=>{var i;const a={};return(i=R[o])==null||i.forEach(n=>{(!t[n]||t[n].toString().trim()==="")&&(a[n]="This field is required")}),M(a),Object.keys(a).length===0},b=()=>{if(U())o<l?D(a=>a+1):y();else{const a=document.querySelector(`[name="${Object.keys(m)[0]}"]`);a&&a.scrollIntoView({behavior:"smooth",block:"center"})}},F=()=>{D(a=>a-1)},y=a=>{a&&a.preventDefault&&a.preventDefault();try{localStorage.setItem("marriageFormData",JSON.stringify(t));const i=c==="Marriage License"?"ML-"+Date.now().toString().slice(-6):"MC-"+Date.now().toString().slice(-6),d=new Date().toLocaleDateString("en-US",{year:"numeric",month:"numeric",day:"numeric"}),g={id:i,type:c||"Marriage Certificate",applicationType:"New Application",date:d,status:"Pending",message:`Application for ${c||"marriage"} between ${t.husbandFirstName||""} ${t.husbandLastName||""} and ${t.wifeFirstName||""} ${t.wifeLastName||""}`,formData:{...t}};if(console.log(`Creating new ${c} application:`,g),!V(g)){console.error("Failed to add application to storage"),alert("There was an error submitting your application. Please try again.");return}window.dispatchEvent(new Event("storage")),h(c==="Marriage License"?"/MarriageLicenseApplication":"/MarriageCertificateApplication")}catch(i){console.error(`Error submitting ${c} application:`,i),alert("There was an error submitting your application. Please try again.")}};return e.jsxs(x,{className:"MarriageCertificateFormContainer",children:[e.jsxs(G,{open:O,"aria-labelledby":"previous-data-dialog-title","aria-describedby":"previous-data-dialog-description",PaperProps:{sx:{borderRadius:"10px",maxWidth:"500px",width:"100%"}},children:[e.jsx(K,{id:"previous-data-dialog-title",sx:{backgroundColor:"#184a5b",color:"white",fontWeight:600},children:"Use Previous Marriage License Data?"}),e.jsx(Q,{sx:{padding:"24px"},children:e.jsxs(Z,{id:"previous-data-dialog-description",sx:{color:"#333333",fontSize:"16px",marginBottom:"10",marginTop:"30px"},children:["We found a previous Marriage License application submitted on ",u&&new Date(u.date).toLocaleDateString(),". Would you like to use that information to fill out this form?"]})}),e.jsxs(X,{sx:{padding:"16px 24px",justifyContent:"space-between"},children:[e.jsx(s,{onClick:I,sx:{backgroundColor:"#e0e0e0",color:"#333333",padding:"4px 10px",fontWeight:500},children:"No, I'll fill it out again"}),e.jsx(s,{onClick:z,autoFocus:!0,sx:{backgroundColor:"#184a5b",color:"white",padding:"4px 10px",fontWeight:500},children:"Yes, use my previous information"})]})]}),e.jsxs(S,{variant:"h4",className:"MarriageCertificateFormTitle",children:[c||"Marriage"," Application Form"]}),A&&e.jsx(ee,{severity:"info",sx:{mb:2},children:"Using data from your previous Marriage License application. Please verify all information is still correct."}),e.jsxs(ae,{className:"MarriageCertificateForm",elevation:3,children:[o===1&&e.jsxs(e.Fragment,{children:[e.jsx(_,{formData:t,handleChange:f,errors:m}),e.jsx(s,{variant:"contained",onClick:b,className:"MarriageCertificateFormButton",children:"Next"})]}),o===2&&e.jsxs(e.Fragment,{children:[e.jsx(Y,{formData:t,handleChange:f,errors:m}),e.jsx(s,{variant:"contained",onClick:F,className:"MarriageCertificateFormButton",children:"Previous"}),e.jsx(s,{variant:"contained",onClick:l===2?y:b,className:"MarriageCertificateFormButton",children:l===2?"Submit":"Next"})]}),o===3&&l>2&&e.jsxs(e.Fragment,{children:[e.jsx(q,{formData:t,handleChange:f,errors:m}),e.jsx(s,{variant:"contained",onClick:F,className:"MarriageCertificateFormButton",children:"Previous"}),e.jsx(s,{variant:"contained",onClick:b,className:"MarriageCertificateFormButton",children:"Next"})]}),o===4&&l>2&&e.jsxs(e.Fragment,{children:[e.jsx(H,{formData:t,handleChange:f,errors:m}),e.jsx(s,{variant:"contained",onClick:F,className:"MarriageCertificateFormButton",children:"Previous"}),e.jsx(s,{variant:"contained",onClick:y,className:"MarriageCertificateFormButton",children:"Submit"})]}),e.jsxs(x,{className:"FormProgressContainer",children:[e.jsxs(S,{variant:"body2",children:["Step ",o," of ",l]}),e.jsx(x,{className:"FormProgressBar",children:e.jsx(x,{className:"FormProgressFill",sx:{width:`${o/l*100}%`}})})]})]})]})};v.__docgenInfo={description:"",methods:[],displayName:"MarriageCertificateForm"};const Ae={title:"Components/MarriageCertificateForm",component:v},p=()=>e.jsx(v,{});p.__docgenInfo={description:"",methods:[],displayName:"Default"};var j,B,P;p.parameters={...p.parameters,docs:{...(j=p.parameters)==null?void 0:j.docs,source:{originalSource:"() => <MarriageCertificateForm />",...(P=(B=p.parameters)==null?void 0:B.docs)==null?void 0:P.source}}};const Ee=["Default"];export{p as Default,Ee as __namedExportsOrder,Ae as default};
