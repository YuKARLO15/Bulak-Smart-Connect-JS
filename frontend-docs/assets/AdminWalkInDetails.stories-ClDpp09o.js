import{j as a}from"./jsx-runtime-BsKCuyZw.js";import{r as h}from"./iframe-D53CPoB8.js";import{q as j}from"./queueService-BpOaP1T5.js";import{u as S,b as _}from"./chunk-AYJ5UCUI-DKtaCcXG.js";import"./index-xsH4HHeE.js";import"./api-DR_qaoiX.js";const x=()=>{const r=S(),{id:c}=_(),[i,v]=h.useState(null),[g,p]=h.useState(!0),[k,u]=h.useState(null),b=e=>{if(typeof e=="string"&&e.startsWith("WK"))return e;if(!e)return"WK000";const s=e!=null&&e.includes("-")?e.split("-")[1]:e,m=parseInt(s,10)||0;return`WK${String(m).padStart(3,"0")}`};h.useEffect(()=>{(async()=>{if(!c){u("No queue ID provided"),p(!1);return}try{p(!0);const s=await j.fetchQueueDetails(c);console.log("Queue details fetched:",s),v(s),u(null)}catch(s){console.error("Error fetching queue details:",s),u("Failed to load queue details")}finally{p(!1)}})()},[c]);const y=async()=>{var e,s,m;try{await j.updateQueueStatus(c,"completed"),alert("Queue marked as complete!"),r(-1)}catch(t){console.error("Error completing queue:",t),console.error("Error details:",((e=t.response)==null?void 0:e.data)||t.message),alert(`Failed to complete queue. Error: ${((m=(s=t.response)==null?void 0:s.data)==null?void 0:m.message)||t.message}`)}};if(g)return a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{style:{marginLeft:"12px"},children:"Loading queue details..."})]});if(k)return a.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",flexDirection:"column",color:"#721c24",background:"#f8d7da",padding:"20px",borderRadius:"8px"},children:[a.jsx("p",{children:k}),a.jsx("button",{onClick:()=>r(-1),style:{marginTop:"16px",background:"#1C4D5A",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"Go Back"})]});const n=(i==null?void 0:i.queue)||{},l=(i==null?void 0:i.details)||{},o=l.user||{},I=b(n.queueNumber||n.id),D=l.firstName||o.firstName||n.firstName||"",W=l.lastName||o.lastName||n.lastName||"",C=l.middleInitial||o.middleInitial||"",E=l.phoneNumber||o.phoneNumber||"",Q=l.reasonOfVisit||n.reason||n.reasonOfVisit||"";return a.jsxs("div",{children:[a.jsxs("div",{className:"admin-walkin-details-header-bar",children:[a.jsx("button",{className:"admin-walkin-details-menu-btn",onClick:()=>r(-1),"aria-label":"Back",children:a.jsxs("span",{className:"admin-walkin-details-menu-icon",children:[a.jsx("span",{className:"admin-walkin-details-menu-bar"}),a.jsx("span",{className:"admin-walkin-details-menu-bar"}),a.jsx("span",{className:"admin-walkin-details-menu-bar"})]})}),a.jsx("h1",{className:"admin-walkin-details-header-title",children:"Walk - in Details"})]}),a.jsx("div",{className:"admin-walkin-details-container",children:a.jsxs("div",{className:"admin-walkin-details-card",children:[a.jsxs("div",{className:"admin-walkin-details-row admin-walkin-details-row-header",children:[a.jsx("span",{className:"admin-walkin-details-label-header",children:"Walk-in Number:"}),a.jsx("span",{className:"admin-walkin-details-value-header",children:I})]}),a.jsxs("div",{className:"admin-walkin-details-info",children:[a.jsxs("div",{className:"admin-walkin-details-col",children:[a.jsxs("div",{children:[a.jsx("span",{className:"admin-walkin-details-label",children:"Last Name:"}),a.jsx("div",{className:"admin-walkin-details-value",children:W})]}),a.jsxs("div",{children:[a.jsx("span",{className:"admin-walkin-details-label",children:"Phone Number:"}),a.jsx("div",{className:"admin-walkin-details-value",children:E})]})]}),a.jsxs("div",{className:"admin-walkin-details-col",children:[a.jsxs("div",{children:[a.jsx("span",{className:"admin-walkin-details-label",children:"First Name:"}),a.jsx("div",{className:"admin-walkin-details-value",children:D})]}),a.jsxs("div",{children:[a.jsx("span",{className:"admin-walkin-details-label",children:"Reason of Visit:"}),a.jsx("div",{className:"admin-walkin-details-value",children:Q})]})]}),a.jsx("div",{className:"admin-walkin-details-col",children:a.jsxs("div",{children:[a.jsx("span",{className:"admin-walkin-details-label",children:"Middle Initial:"}),a.jsx("div",{className:"admin-walkin-details-value",children:C})]})})]}),a.jsxs("div",{className:"admin-walkin-details-actions",children:[a.jsx("button",{className:"admin-walkin-details-cancel-btn",onClick:()=>r(-1),children:"Cancel"}),a.jsx("button",{className:"admin-walkin-details-complete-btn",onClick:y,children:"Complete"})]})]})})]})};x.__docgenInfo={description:"",methods:[],displayName:"AdminWalkInDetails"};const F={title:"Components/AdminWalkInDetails",component:x},d=()=>a.jsx(x,{});d.__docgenInfo={description:"",methods:[],displayName:"Default"};var f,N,w;d.parameters={...d.parameters,docs:{...(f=d.parameters)==null?void 0:f.docs,source:{originalSource:"() => <AdminWalkInDetails />",...(w=(N=d.parameters)==null?void 0:N.docs)==null?void 0:w.source}}};const P=["Default"];export{d as Default,P as __namedExportsOrder,F as default};
