import{a}from"./index-xsH4HHeE.js";const s="http://localhost:3000",r=a.create({baseURL:s,headers:{"Content-Type":"application/json"}}),n=()=>{const t=localStorage.getItem("currentUser");if(!t)return null;try{const e=JSON.parse(t);return(e==null?void 0:e.id)||(e==null?void 0:e._id)||null}catch(e){return console.error("Error parsing user data from localStorage",e),null}};r.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));const l={login:async(t,e)=>{const o=await r.post("/auth/login",{email:t,password:e});return localStorage.setItem("token",o.data.access_token),o.data},register:async t=>{const e=await r.post("/auth/register",t);return localStorage.setItem("token",e.data.access_token),e.data},logout:()=>{localStorage.removeItem("token");const t=n();localStorage.removeItem(`userQueue_${t}`),localStorage.removeItem(`userQueues_${t}`),localStorage.removeItem("currentUser")},getProfile:async()=>r.get("/auth/profile"),updateProfile:async t=>(await r.post("/auth/update-profile",t)).data,adminUpdateUser:async(t,e)=>(await r.post(`/auth/admin/update-user/${t}`,e)).data};export{r as a,l as b};
