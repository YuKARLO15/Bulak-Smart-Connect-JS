import{j as a}from"./jsx-runtime-BQ3NsQ6b.js";import{r as e}from"./iframe-DlZyR-3o.js";import{a as Q}from"./index-xsH4HHeE.js";import{q as R}from"./queueService-BpOaP1T5.js";import{N as B}from"./NavSide-C5d_DcLL.js";import{R as F}from"./RecentApplicationsAdmin-XcCdSMg2.js";import{R as M}from"./RecentAppointmentsAdmin-DMA1cs81.js";import{W as _}from"./WalkInQueueAdmin-Blrbh76m.js";import{R as g,C as v,X as N,Y as D,T as S,B as A}from"./generateCategoricalChart-7GFgpnvz.js";import{B as L}from"./BarChart-B_g5ljJV.js";import{L as V,a as I}from"./LineChart-CNN59-YP.js";import"./api-DR_qaoiX.js";import"./AuthContext-sjaEVyQP.js";import"./createSvgIcon-B1mfXgi4.js";import"./clsx-B-dksMZM.js";import"./DefaultPropsProvider-Cqs54V2y.js";import"./identifier-B6pg45cx.js";import"./Close-101PcF4a.js";import"./Description-VAgdDaQB.js";import"./Campaign-xUSs3NLA.js";import"./chunk-AYJ5UCUI-CYK0uUV1.js";import"./ApplicationData-DCHunuve.js";import"./Box-kW_oYhdJ.js";import"./useTheme-CnXjXBB5.js";import"./CircularProgress-Z1EmvMCU.js";import"./createSimplePaletteValueFilter-D9fbgT6T.js";import"./Typography-zMzzW-gN.js";import"./Card-C0x7uTRo.js";import"./Paper-CQ3AIqLg.js";import"./useTheme-C_z8Hb-H.js";import"./CardContent-CtgvuASh.js";import"./List-MvMjZnft.js";import"./ListItem-C4PV0yJi.js";import"./isHostComponent-DVu5iVWx.js";import"./isMuiElement-CK1xQtxW.js";import"./Chip-CeRYKDvW.js";import"./Button-KDMn5JJ-.js";import"./RecentAppointmentData-yblrwM7G.js";import"./Divider--BTSleS0.js";import"./dividerClasses-Ddde7_O-.js";import"./index-5u0gWojL.js";const q=s=>{if(typeof s=="string"&&s.startsWith("WK"))return s;if(!s)return"WK000";const o=s.includes("-")?s.split("-")[1]:s,d=parseInt(o,10)||0;return`WK${String(d).padStart(3,"0")}`},p=()=>{const[s,o]=e.useState([]),[d,l]=e.useState([]),[G,h]=e.useState([]),[P,u]=e.useState([]),[X,f]=e.useState([]),[Y,m]=e.useState(!1),[$,C]=e.useState(null),[w,O]=e.useState(""),[z,J]=e.useState(!1),[x,K]=e.useState(!1),[H,b]=e.useState(!0),[U,j]=e.useState(null),T=r=>{O(r.target.value)},c=e.useCallback(async()=>{b(!0);try{const r=await R.fetchWalkInQueues();console.log("Walk-in queues fetched:",r);const t=r.map(i=>({id:i.id,queueNumber:q(i.queueNumber),firstName:i.firstName||"Guest",lastName:i.lastName||"",reasonOfVisit:i.reasonOfVisit||"General Inquiry",status:i.status||"pending",timestamp:i.createdAt||new Date().toISOString()}));f(t),j(null)}catch(r){console.error("Error fetching walk-in queue:",r),j("Could not load queue data"),f([{id:1,queueNumber:"WK001",firstName:"Juan",lastName:"Dela Cruz",reasonOfVisit:"Birth Certificate",status:"pending",timestamp:new Date().toISOString()},{id:2,queueNumber:"WK002",firstName:"Maria",lastName:"Santos",reasonOfVisit:"Marriage Certificate",status:"in-progress",timestamp:new Date().toISOString()},{id:3,queueNumber:"WK003",firstName:"Pedro",lastName:"Reyes",reasonOfVisit:"Death Certificate",status:"pending",timestamp:new Date().toISOString()}])}finally{b(!1)}},[]);return e.useEffect(()=>{c();const r=setInterval(c,3e4);return()=>clearInterval(r)},[c]),e.useEffect(()=>{(async()=>{m(!0);try{const t=await Q.get("http://localhost:3000/queue/stats"),i=[{name:"Mon",value:t.data.pending||0,appointments:t.data.serving||0},{name:"Tue",value:t.data.pending||0,appointments:t.data.serving||0},{name:"Wed",value:t.data.pending||0,appointments:t.data.serving||0},{name:"Thu",value:t.data.pending||0,appointments:t.data.serving||0},{name:"Fri",value:t.data.pending||0,appointments:t.data.serving||0}],E=[{name:"Mon",birth:10,marriage:5},{name:"Tue",birth:15,marriage:8},{name:"Wed",birth:12,marriage:10},{name:"Thu",birth:18,marriage:12},{name:"Fri",birth:20,marriage:15}];o(i),l(E),h([]),u([]),m(!1)}catch(t){console.error("Error fetching dashboard data:",t),C("Failed to load dashboard data"),o([{name:"Mon",value:10,appointments:5},{name:"Tue",value:15,appointments:8},{name:"Wed",value:12,appointments:10},{name:"Thu",value:18,appointments:12},{name:"Fri",value:20,appointments:15}]),l([{name:"Mon",birth:10,marriage:5},{name:"Tue",birth:15,marriage:8},{name:"Wed",birth:12,marriage:10},{name:"Thu",birth:18,marriage:12},{name:"Fri",birth:20,marriage:15}]),h([]),u([]),m(!1)}})()},[]),a.jsxs("div",{className:`admin-dashboard ${x?"sidebar-open":""}`,children:[a.jsx(B,{isSidebarOpen:x,setIsSidebarOpen:K}),a.jsxs("div",{className:"admin-dashboard-top-nav",children:[a.jsx("h1",{className:"admin-dashboard-title",children:"Dashboard"}),a.jsx("div",{className:"admin-dashboard-search-bar",children:a.jsx("input",{type:"text",placeholder:"Search",value:w,onChange:T})})]}),a.jsx("div",{className:"admin-dashboard-content-wrapper",children:a.jsxs("div",{className:"admin-dashboard-container",children:[a.jsxs("div",{className:"admin-dashboard-main",children:[a.jsxs("div",{className:"admin-dashboard-charts",children:[a.jsxs("div",{className:"admin-dashboard-chart-card",children:[a.jsx("div",{className:"admin-dashboard-chart-header",children:a.jsxs("div",{className:"admin-dashboard-chart-title",children:[a.jsx("span",{className:"admin-dashboard-walk-in-dot"})," Walk In",a.jsx("span",{className:"admin-dashboard-appointment-dot"})," Appointment"]})}),a.jsx(g,{width:"100%",height:200,children:a.jsxs(L,{data:s,children:[a.jsx(v,{strokeDasharray:"3 3"}),a.jsx(N,{dataKey:"name"}),a.jsx(D,{}),a.jsx(S,{}),a.jsx(A,{dataKey:"value",name:"Walk-ins",fill:"#1C4D5A"}),a.jsx(A,{dataKey:"appointments",name:"Appointments",fill:"#8DC3A7"})]})})]}),a.jsxs("div",{className:"admin-dashboard-chart-card",children:[a.jsx("div",{className:"admin-dashboard-chart-header",children:a.jsxs("div",{className:"admin-dashboard-chart-title",children:[a.jsx("span",{className:"admin-dashboard-birth-dot"})," Birth Certificate",a.jsx("span",{className:"admin-dashboard-marriage-dot"})," Marriage Certificate"]})}),a.jsx(g,{width:"100%",height:200,children:a.jsxs(V,{data:d,children:[a.jsx(v,{strokeDasharray:"3 3"}),a.jsx(N,{dataKey:"name"}),a.jsx(D,{}),a.jsx(S,{}),a.jsx(I,{type:"monotone",dataKey:"birth",stroke:"#1C4D5A",activeDot:{r:8}}),a.jsx(I,{type:"monotone",dataKey:"marriage",stroke:"#8DC3A7"})]})})]})]}),a.jsxs("div",{className:"admin-dashboard-section-container",children:[a.jsx("h2",{children:"Document Application"}),a.jsx(F,{}),a.jsx("div",{className:"admin-dashboard-document-applications"})]}),a.jsxs("div",{className:"admin-dashboard-section-container",children:[a.jsx("h2",{children:" Scheduled Appointments"}),a.jsx(M,{}),a.jsx("div",{className:"admin-dashboard-pre-appointments"})]})]}),a.jsx("div",{className:"admin-dashboard-sidebar",children:a.jsxs("div",{className:"admin-dashboard-walk-in-queue",children:[a.jsx("h2",{children:"Walk - In Queue"}),a.jsx(_,{})]})})]})})]})};p.__docgenInfo={description:"",methods:[],displayName:"AdminDashboard"};const _a={title:"Components/AdminDashboard",component:p},n=()=>a.jsx(p,{});n.__docgenInfo={description:"",methods:[],displayName:"Default"};var W,y,k;n.parameters={...n.parameters,docs:{...(W=n.parameters)==null?void 0:W.docs,source:{originalSource:"() => <AdminDashboard />",...(k=(y=n.parameters)==null?void 0:y.docs)==null?void 0:k.source}}};const La=["Default"];export{n as Default,La as __namedExportsOrder,_a as default};
