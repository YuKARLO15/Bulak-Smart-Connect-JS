import{j as e}from"./jsx-runtime-CjwXaGRr.js";import{r as l}from"./iframe-brDamC9w.js";import{C as k}from"./Close-BMSjubH6.js";import{c as y}from"./createSvgIcon-DXnigLye.js";/* empty css                           */import{g as L}from"./ApplicationData-DCHunuve.js";import{B as o}from"./Box-CGp581ZG.js";import{C as E}from"./CircularProgress-B5Sc7MgM.js";import{T as t}from"./Typography-LfWPPnfY.js";import{A as R}from"./Alert-AZtpFYWb.js";import{C as b}from"./Card-DvmrJ2tG.js";import{C}from"./CardContent-CPEXRRRT.js";import{B as c}from"./Button-Bn5_LpHy.js";import{D as T,a as P,b as z}from"./DialogTitle-B12W20TV.js";import{I as B}from"./IconButton-4LAY5qoG.js";import{S as M}from"./Stack-Cn3cactl.js";import{D as j}from"./Divider-SVX5RF5i.js";import{L as O}from"./List-DcfqQNdJ.js";import{L as W}from"./ListItem-Wdx20Hxg.js";import{G as m}from"./Grid-CbP7TIsd.js";import{C as F}from"./Chip-LZrkCR1Z.js";import{u as V,a as H}from"./chunk-AYJ5UCUI-CsalvEI-.js";const J=y(e.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment"),G=y(e.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite"),Y=()=>{const[s,A]=l.useState([]),[v,p]=l.useState(!0),[x,S]=l.useState(null),n=V(),D=H(),[I,d]=l.useState(!1);l.useEffect(()=>{const r=async()=>{try{p(!0);const i=L();A(i)}catch(i){S("Error loading applications: "+i.message)}finally{p(!1)}};r();const a=i=>{i.key==="applications"&&r()};return window.addEventListener("storage",a),()=>{window.removeEventListener("storage",a)}},[D.pathname]);const N=()=>{d(!0)},f=()=>{d(!1)},h=r=>{d(!1),r==="marriage"?n("/MarriageDashboard"):r==="birth"&&n("/BirthCertificateDashboard")},g=r=>{switch(r){case"Approved":return"#4caf50";case"Pending":return"#ff9800";case"Declined":return"#f44336";default:return"#184a5b"}},w=r=>{switch(r){case"Approved":return"rgba(76, 175, 80, 0.1)";case"Pending":return"rgba(255, 152, 0, 0.1)";case"Declined":return"rgba(244, 67, 54, 0.1)";default:return"rgba(24, 74, 91, 0.1)"}},u=r=>{if(r.type==="Birth Certificate")try{const a=s.find(i=>i.id===r.id);a&&a.formData?(localStorage.setItem("birthCertificateApplication",JSON.stringify(a.formData)),localStorage.setItem("currentApplicationId",r.id),n("/BirthApplicationSummary")):(console.error("Application data not found for ID:",r.id),alert("Could not load application data. Please try again."))}catch(a){console.error("Error preparing application summary:",a),alert("An error occurred while loading the application summary.")}else if(r.type==="Marriage Certificate")try{const a=s.find(i=>i.id===r.id);a&&a.formData?(localStorage.setItem("marriageFormData",JSON.stringify(a.formData)),localStorage.setItem("currentMarriageApplicationId",r.id),n("/MarriageSummaryForm")):(console.error("Marriage application data not found for ID:",r.id),alert("Could not load marriage application data. Please try again."))}catch(a){console.error("Error preparing marriage application summary:",a),alert("An error occurred while loading the marriage application summary.")}else if(r.type==="Marriage License")try{const a=s.find(i=>i.id===r.id);a&&a.formData?(localStorage.setItem("marriageFormData",JSON.stringify(a.formData)),n("/MarriageLicenseSummary")):(console.error("Marriage license data not found"),alert("Could not load marriage license data. Please try again."))}catch(a){console.error("Error preparing marriage license summary:",a),alert("An error occurred while loading the marriage license summary.")}};return v?e.jsxs(o,{className:"LoadingContainerApplications",children:[e.jsx(E,{size:30,sx:{color:"#184a5b"}}),e.jsx(t,{variant:"body2",sx:{mt:1,color:"#666"},children:"Loading recent applications..."})]}):x?e.jsx(o,{className:"ErrorContainerApplications",children:e.jsx(R,{severity:"error",children:x})}):s.length===0?e.jsxs("div",{className:"RecentApplicationsDivider",children:[e.jsx(t,{variant:"h5",className:"RecentApplicationsTitle",children:"RECENT APPLICATIONS"}),e.jsx(b,{className:"NoApplicationsCard",elevation:0,children:e.jsxs(C,{children:[e.jsx(t,{variant:"body1",sx:{color:"#555",mb:2},children:"You have no recent applications."}),e.jsx(c,{variant:"contained",sx:{backgroundColor:"#184a5b","&:hover":{backgroundColor:"#0d3542"},textTransform:"none",borderRadius:"6px"},className:"StartApplicationBtn",onClick:N,children:"Start a New Application"}),e.jsxs(T,{open:I,onClose:f,maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:"8px",overflow:"hidden"}},children:[e.jsxs(P,{sx:{backgroundColor:"#184a5b",color:"white",display:"flex",justifyContent:"space-between",alignItems:"center",py:1.5},children:["Select Application Type",e.jsx(B,{onClick:f,sx:{color:"white"},children:e.jsx(k,{})})]}),e.jsx(z,{sx:{p:0},children:e.jsxs(M,{spacing:0,divider:e.jsx(j,{}),children:[e.jsxs(c,{onClick:()=>h("marriage"),sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",textTransform:"none",p:2,borderRadius:0,"&:hover":{backgroundColor:"rgba(138, 172, 181, 0.1)"}},children:[e.jsx(G,{sx:{mr:2,color:"#8aacb5"}}),e.jsxs(o,{textAlign:"left",children:[e.jsx(t,{sx:{fontWeight:500,color:"#184a5b"},children:"Marriage Certificate"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"Apply for a marriage certificate or license"})]})]}),e.jsxs(c,{onClick:()=>h("birth"),sx:{display:"flex",justifyContent:"flex-start",alignItems:"center",textTransform:"none",p:2,borderRadius:0,"&:hover":{backgroundColor:"rgba(138, 172, 181, 0.1)"}},children:[e.jsx(J,{sx:{mr:2,color:"#8aacb5"}}),e.jsxs(o,{textAlign:"left",children:[e.jsx(t,{sx:{fontWeight:500,color:"#184a5b"},children:"Birth Certificate"}),e.jsx(t,{variant:"body2",color:"text.secondary",children:"Apply for a birth certificate"})]})]})]})})]})]})})]}):e.jsxs("div",{className:"RecentApplicationsDivider",children:[e.jsx(t,{variant:"h5",className:"RecentApplicationsTitle",children:"RECENT APPLICATIONS"}),e.jsx(j,{sx:{mb:2}}),e.jsx(O,{disablePadding:!0,className:"applicationList",children:s.map((r,a)=>e.jsx(W,{disablePadding:!0,sx:{mb:1.5},className:"applicationListItem",children:e.jsx(b,{className:"ApplicationCard",elevation:0,sx:{borderLeft:`3px solid ${g(r.status)}`,width:"100%",height:"auto",backgroundColor:"#fff",transition:"transform 0.2s","&:hover":{transform:"translateY(-2px)",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)"}},children:e.jsx(C,{sx:{py:1.5,px:2},children:e.jsxs(m,{container:!0,alignItems:"center",spacing:1,children:[e.jsx(m,{item:!0,xs:12,sm:7,children:e.jsxs(o,{children:[e.jsxs(o,{display:"flex",alignItems:"center",mb:.5,children:[e.jsx(t,{className:"ApplicationCardTitle",onClick:()=>u(r),sx:{fontSize:"0.95rem",fontWeight:500,color:"#184a5b",cursor:"pointer","&:hover":{textDecoration:"underline"}},children:r.type}),e.jsx(F,{label:r.status,size:"small",sx:{ml:1,height:"20px",fontSize:"0.7rem",fontWeight:500,backgroundColor:w(r.status),color:g(r.status),borderRadius:"4px","& .MuiChip-label":{px:1}}})]}),e.jsxs(o,{display:"flex",alignItems:"center",mb:.5,children:[e.jsxs(t,{className:"ApplicationId",sx:{fontSize:"0.75rem",color:"#666",mr:1.5},children:["ID: ",r.id||"N/A"]}),e.jsx(t,{className:"ApplicationDate",sx:{fontSize:"0.75rem",color:"#666"},children:r.date})]}),r.message&&e.jsx(t,{className:"ApplicationDescription",sx:{fontSize:"0.8rem",color:"#555",display:"-webkit-box",WebkitLineClamp:1,WebkitBoxOrient:"vertical",overflow:"hidden",textOverflow:"ellipsis"},children:r.message})]})}),e.jsx(m,{item:!0,xs:12,sm:5,children:e.jsx(o,{display:"flex",justifyContent:"flex-end",children:e.jsx(c,{size:"small",className:"ViewSummaryBtn",onClick:()=>u(r),sx:{color:"#184a5b",border:"1px solid #8aacb5",textTransform:"none",fontSize:"0.75rem",py:.5,minWidth:"100px","&:hover":{backgroundColor:"rgba(24, 74, 91, 0.04)"}},children:"View Application"})})})]})})})},r.id||a))})]})};Y.__docgenInfo={description:"",methods:[],displayName:"RecentApplicationsComponent"};export{Y as R};
